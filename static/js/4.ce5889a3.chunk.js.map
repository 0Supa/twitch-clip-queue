{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Toggle.tsx","pages/Queue/ClipCard.tsx","pages/Queue/ClipRoll.tsx","pages/Queue/Player.tsx","pages/Queue/QueuePage.tsx"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","Toggle","pressed","className","colour","children","onClick","props","classes","addButtonColour","ClipCard","id","provider","url","thumbnailUrl","title","submitter","submitterCount","channel","game","src","alt","Button","selectCurrentClip","removeClip","href","target","rel","displayName","userName","ClipRoll","clips","clipLimit","isAcceptingClip","useState","acceptingClips","slice","map","clip","submitters","get","PlayerSwitch","window","location","hostname","height","width","allowFullScreen","startTime","Player","QueuePage","advancedVisible","setAdvancedVisible","isAcceptingClips","useHookState","clipQueue","clipMem","clipMemory","current","currentClip","token","userChannel","tokenValue","useEffect","TwitchChat","connect","disconnect","nextClip","acceptClips","clearQueue","newChannel","prompt","changeChannel","ClipFinder","findByUrl","then","addClip","clearMemory"],"mappings":"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","file":"static/js/4.ce5889a3.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { ButtonHTMLAttributes, ReactNode } from 'react';\r\nimport { addButtonColour } from './Button';\r\n\r\ninterface ToggleProps extends ButtonHTMLAttributes<any> {\r\n  pressed: boolean;\r\n  className?: string;\r\n  colour?: string;\r\n  children?: ReactNode | undefined;\r\n\r\n  onClick: () => void;\r\n}\r\n\r\nfunction Toggle({ pressed, className, colour, children, onClick, ...props }: ToggleProps) {\r\n  let classes = addButtonColour(colour, className);\r\n\r\n  if (pressed) {\r\n    classes += ' pressed';\r\n  }\r\n\r\n  return (\r\n    <button {...props} className={classes} onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Toggle;\r\n","import React from 'react';\nimport Button from '../../components/Button';\nimport { ClipSubmitter } from '../../models';\nimport { removeClip, selectCurrentClip } from '../../store/queue';\n\nexport interface ClipCardProps {\n  id: string;\n  provider: string;\n  title?: string;\n  submitter?: ClipSubmitter;\n  submitterCount?: number;\n  channel?: string;\n  game?: string;\n\n  url?: string;\n  thumbnailUrl?: string;\n}\n\nfunction ClipCard({\n  id,\n  provider,\n  url,\n  thumbnailUrl,\n  title,\n  submitter,\n  submitterCount = 0,\n  channel,\n  game,\n}: ClipCardProps) {\n  return (\n    <div className={'clip max-w-sm rounded overflow-hidden flex flex-col'}>\n      {thumbnailUrl && <img className=\"w-full\" src={thumbnailUrl} alt={title} />}\n      <div className=\"h-full w-full relative\">\n        <div className=\"absolute flex right-1 bottom-1 clip-buttons space-x-1\">\n          <Button colour=\"green\" onClick={() => selectCurrentClip({ id, provider })}>\n            &raquo;\n          </Button>\n          <Button colour=\"red\" onClick={() => removeClip({ id, provider })}>\n            &times;\n          </Button>\n        </div>\n        <div className=\"px-2 py-1\">\n          <h4 className=\"font-bold text-sm mb-1\">\n            <a className=\"text-black no-underline\" href={url} target=\"_blank\" rel=\"noreferrer\">\n              {title}\n            </a>\n          </h4>\n          <p className=\"text-gray-700 text-xs mb-1 font-normal\">\n            <span className=\"font-bold\">{channel} </span>\n            {game && (\n              <span>\n                playing&nbsp;<span className=\"font-bold\">{game}</span>\n              </span>\n            )}\n          </p>\n          <p className=\"text-gray-700 text-xs font-normal\">\n            {submitter && (\n              <>\n                Submitted by <span className=\"font-bold\">{submitter.displayName ?? submitter.userName}</span>\n              </>\n            )}\n            <span className=\"text-xs\">{submitterCount > 0 && ' +' + submitterCount}</span>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ClipCard;\n","import { useState } from '@hookstate/core';\r\nimport React from 'react';\r\nimport { acceptingClips } from '../../store/queue';\r\nimport ClipCard from './ClipCard';\r\n\r\nexport interface ClipRollProps {\r\n  clips: any[];\r\n  clipLimit?: number;\r\n}\r\n\r\nfunction ClipRoll({ clips, clipLimit = 19 }: ClipRollProps) {\r\n  const isAcceptingClip = useState(acceptingClips);\r\n\r\n  return (\r\n    <div className=\"grid gap-3 grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 w-full\">\r\n      {clips.length ? (\r\n        <>\r\n          {clips.slice(0, clipLimit).map((clip) => (\r\n            <ClipCard key={`${clip.provider}:${clip.id}`} {...clip} submitterCount={clip.submitters?.length} />\r\n          ))}\r\n          {clips.length > clipLimit && (\r\n            <div className=\"clip max-w-sm rounded overflow-hidden text-3xl flex py-4\">\r\n              <div className=\"mx-auto my-auto\">+{clips.length - clipLimit} more</div>\r\n            </div>\r\n          )}\r\n        </>\r\n      ) : (\r\n        isAcceptingClip.get() && <div className=\"col-span-full text-lg font-bold\">Waiting for some clips from chat...</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClipRoll;\r\n","import React from 'react';\nimport { ClipSubmitter } from '../../models';\n\nexport interface PlayerProps {\n  title?: string;\n  provider?: string;\n  id?: string;\n  channel?: string;\n  game?: string;\n  submitter?: ClipSubmitter;\n  submitterCount?: number;\n  startTime?: string;\n}\n\nfunction Player(props: PlayerProps) {\n  const { game, channel, title, submitter, submitterCount = 0 } = props;\n  return (\n    <>\n      <div className=\"player\">\n        <PlayerSwitch {...props} />\n      </div>\n      <div className=\"pt-2\">\n        <h2 className=\"font-bold mb-1\">{title ?? <>&nbsp;</>}</h2>\n        <p className=\"text-gray-500 text-sm font-normal\">\n          {channel ? (\n            <>\n              <span className=\"font-bold\">{channel}</span>\n              {game && (\n                <span>\n                  &nbsp;playing&nbsp;<span className=\"font-bold\">{game}</span>\n                </span>\n              )}\n              , submitted by <span className=\"font-bold\">{submitter?.displayName ?? submitter?.userName}</span>\n              {submitterCount > 0 && <> and {submitterCount} other(s)</>}\n            </>\n          ) : (\n            <>&nbsp;</>\n          )}\n        </p>\n      </div>\n    </>\n  );\n}\n\nfunction PlayerSwitch({ provider, ...props }: PlayerProps) {\n  switch (provider) {\n    case undefined:\n      return <></>;\n    case 'twitch-clip':\n      return (\n        <iframe\n          src={`https://clips.twitch.tv/embed?clip=${props.id}&autoplay=true&parent=${window.location.hostname}`}\n          height=\"100%\"\n          width=\"100%\"\n          className=\"player\"\n          allowFullScreen={true}\n          title={props.title}\n        ></iframe>\n      );\n    case 'twitch-vod':\n      return (\n        <iframe\n          src={`https://player.twitch.tv/?video=${props.id}&autoplay=true&parent=${window.location.hostname}&time=${props.startTime}`}\n          height=\"100%\"\n          width=\"100%\"\n          className=\"player\"\n          allowFullScreen={true}\n          title={props.title}\n        ></iframe>\n      );\n    case 'youtube':\n      return (\n        <iframe\n          src={`https://www.youtube.com/embed/${props.id}?autoplay=1&start=${props.startTime ?? ''}`}\n          height=\"100%\"\n          width=\"100%\"\n          className=\"player\"\n          allowFullScreen={true}\n          title={props.title}\n        ></iframe>\n      );\n  }\n\n  return <span>Provider not supported: {provider}</span>;\n}\n\nexport default Player;\n","import React, { useEffect, useState } from 'react';\nimport { useState as useHookState } from '@hookstate/core';\nimport Button from '../../components/Button';\nimport Toggle from '../../components/Toggle';\nimport ClipFinder from '../../services/ClipFinder';\nimport TwitchChat from '../../services/TwitchChat';\nimport {\n  acceptClips,\n  acceptingClips,\n  addClip,\n  clearMemory,\n  clearQueue,\n  clipMemory,\n  clipQueue,\n  currentClip,\n  nextClip,\n} from '../../store/queue';\nimport { changeChannel, userChannel, userName } from '../../store/user';\nimport ClipRoll from './ClipRoll';\nimport Player from './Player';\nimport './styles.css';\n\nfunction QueuePage() {\n  const [advancedVisible, setAdvancedVisible] = useState(false);\n  const isAcceptingClips = useHookState(acceptingClips);\n  const clips = useHookState(clipQueue);\n  const clipMem = useHookState(clipMemory);\n  const current = useHookState(currentClip);\n\n  const token = useHookState(userName);\n  const channel = useHookState(userChannel);\n  const tokenValue = token.get();\n\n  useEffect(() => {\n    TwitchChat.connect();\n    return () => {\n      TwitchChat.disconnect();\n    };\n  }, [tokenValue]);\n\n  return (\n    <>\n      <Player {...current.get()} submitterCount={current.submitters.get()?.length} />\n      <div className=\"mt-4 flex w-full\">\n        <Button colour=\"green\" className=\"mr-2\" onClick={() => nextClip()}>\n          Next &raquo;\n        </Button>\n        <Toggle pressed={isAcceptingClips.get()} className=\"mr-2\" onClick={() => acceptClips(!isAcceptingClips.get())}>\n          {isAcceptingClips.get() ? <>Close the floodgates! 🌊</> : <>Open the floodgates! 🚪</>}\n        </Toggle>\n        <Button colour=\"red\" className=\"mr-2\" onClick={() => clearQueue()}>\n          &times; Clear queue <em>({clips.length})</em>\n        </Button>\n        <Toggle pressed={advancedVisible} colour=\"red\" onClick={() => setAdvancedVisible(!advancedVisible)}>\n          ⚙️\n        </Toggle>\n      </div>\n      {advancedVisible && (\n        <div className=\"mt-2 flex w-full\">\n          <Button\n            className=\"mr-2\"\n            onClick={() => {\n              const newChannel = prompt('Enter channel to read chat from', channel.get() as string);\n              if (newChannel && newChannel !== channel.get()) {\n                changeChannel(newChannel);\n              }\n            }}\n          >\n            Change channel <em>({channel.get()})</em>\n          </Button>\n          <Button\n            className=\"mr-2\"\n            onClick={() => {\n              const url = prompt('Enter clip url', '');\n              if (url) {\n                ClipFinder.findByUrl(url).then((clip) => {\n                  if (clip) {\n                    clip.url = url;\n                    clip.submitter = { userName: userName.get() ?? '', displayName: userName.get() ?? '' };\n                    addClip(clip);\n                  }\n                });\n              }\n            }}\n          >\n            + Add cilp\n          </Button>\n          <Button\n            onClick={() => clearMemory()}\n            title=\"Remove all clips from permanent memory, allow all clips to be posted and queued again\"\n          >\n            &times; Purge memory <em>({clipMem.length})</em>\n          </Button>\n        </div>\n      )}\n      <div className=\"mt-4\">\n        <ClipRoll clips={clips.get()} />\n      </div>\n    </>\n  );\n}\n\nexport default QueuePage;\n"],"sourceRoot":""}