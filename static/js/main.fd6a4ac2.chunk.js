(this["webpackJsonptwitch-clip-queue"]=this["webpackJsonptwitch-clip-queue"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(48),i=n.n(c),u=(n(60),n(1)),o=n.n(u),s=n(3),l=n(15),d=n(54),f=n(4),p=n(26),b=n(17),h=n(9),v=n(2),j=a.a.lazy((function(){return n.e(3).then(n.bind(null,105))})),g=a.a.lazy((function(){return n.e(4).then(n.bind(null,104))}));var m=function(){var e=Object(l.b)(h.c);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("header",{className:"flex",children:[Object(v.jsx)("h1",{className:"mb-4",children:"Twitch Clip Queue"}),Object(v.jsx)("div",{className:"flex-grow"}),Object(v.jsx)("div",{children:e.get()?Object(v.jsx)(p.b,{onClick:Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.e)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Logout"}):Object(v.jsx)(p.b,{onClick:function(){return b.a.redirectToLogin()},children:"Login with Twitch"})})]}),Object(v.jsx)(r.Suspense,{fallback:Object(v.jsx)("div",{}),children:Object(v.jsx)(d.a,{basename:"/twitch-clip-queue/",children:Object(v.jsxs)(f.d,{children:[Object(v.jsx)(f.b,{exact:!0,path:"/",children:e.get()?Object(v.jsx)(g,{}):Object(v.jsx)(j,{})}),Object(v.jsx)(f.b,{path:"*",children:Object(v.jsx)(f.a,{to:"/"})})]})})}),Object(v.jsx)("div",{className:"flex-grow"}),Object(v.jsxs)("footer",{className:"text-xs mt-4",children:["Created by"," ",Object(v.jsx)("span",{className:"font-bold",children:Object(v.jsx)("a",{href:"https://github.com/JakeMiki",target:"_blank",rel:"noreferrer",children:"JakeMiki"})})]})]})},w=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,103)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(m,{})}),document.getElementById("root")),w(),b.a.processAuth()},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(25),a=Object(r.a)("Umami Event"),c=window.umami,i=[];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";a.debug("".concat(t,": ").concat(e));try{if(i.push({type:t,value:e}),c)for(var n;n=i.shift();)c.trackEvent(n.value,n.type)}catch(r){}}},14:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return v})),n.d(t,"k",(function(){return j})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return w}));var r=n(19),a=n(6),c=n(15),i=n(13),u=n(7),o=Object(c.a)({}),s=Object(u.a)("clipQueue",[]),l=Object(u.a)("clipMemory",[]),d=Object(c.a)(!1),f=function(e){var t,n,c=h(e);if(c){if(!(c.submitter===e.submitter||null!==(t=null===(n=c.submitters)||void 0===n?void 0:n.includes(e.submitter))&&void 0!==t&&t)){var o,d=Object(a.a)(Object(a.a)({},c),{},{submitters:[].concat(Object(r.a)(null!==(o=null===c||void 0===c?void 0:c.submitters)&&void 0!==o?o:[]),[e.submitter])});s.set((function(e){return e.map((function(e){return Object(u.b)(e,d)?d:e})).sort((function(e,t){var n,r,a,c;return(null!==(n=null===(r=t.submitters)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-(null!==(a=null===(c=e.submitters)||void 0===c?void 0:c.length)&&void 0!==a?a:0)}))}))}}else b(e)||(l.set((function(t){return[].concat(Object(r.a)(null!==t&&void 0!==t?t:[]),[e])})),s.set((function(t){return[].concat(Object(r.a)(null!==t&&void 0!==t?t:[]),[e])})),Object(i.a)("clip-added"))},p=function(){s.set((function(e){var t=(null!==e&&void 0!==e?e:[]).shift();return o.set(null!==t&&void 0!==t?t:{}),Object(i.a)("next-clip"),Object(r.a)(e)}))},b=function(e){var t,n=l.get();return null!==(t=null===n||void 0===n?void 0:n.find((function(t){return Object(u.b)(t,e)})))&&void 0!==t?t:void 0},h=function(e){var t,n=s.get();return null!==(t=null===n||void 0===n?void 0:n.find((function(t){return Object(u.b)(t,e)})))&&void 0!==t?t:void 0},v=function(e){var t=h(e);t&&(o.set(t),j(t))},j=function(e){s.set((function(t){return t.filter((function(t){return!Object(u.b)(t,e)}))}))},g=function(){s.set([]),o.set({}),Object(i.a)("clear-queue")},m=function(){var e;l.set(Object(r.a)(null!==(e=s.get())&&void 0!==e?e:[])),Object(i.a)("purge-memory")},w=function(e){d.set(e),Object(i.a)("accept-clips-".concat(e))}},17:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(3),i=n(18),u=n.n(i),o=n(9),s="ryrnsuk3r4howfd6jac8lamdan279v",l=function(){return encodeURI("https://id.twitch.tv/oauth2/authorize?client_id=".concat(s)+"&redirect_uri=".concat("https://jakemiki.github.io/twitch-clip-queue/")+'&response_type=token id_token&scope=openid chat:read&claims={"id_token":{"preferred_username":null}}')};var d={getLoginUrl:l,redirectToLogin:function(){window.location.assign(l())},processAuth:function(){if(window.location.hash){var e,t,n=window.location.hash.substring(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(decodeURIComponent(n[1])),e}),{});if(window.location.hash="",n.access_token&&n.id_token)n.decodedIdToken=function(e){if(!e)return;var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}(n.id_token),Object(o.d)(n.access_token,n.id_token,null!==(e=null===(t=n.decodedIdToken)||void 0===t?void 0:t.preferred_username)&&void 0!==e?e:"")}},revokeToken:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://id.twitch.tv/oauth2/revoke?client_id=".concat(s,"&token=").concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=d},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,a,c=n(49),i=n(50);!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error"}(r||(r={}));var u=function(e){var t;return a=null!==(t=r[e])&&void 0!==t?t:r.info},o=function(){function e(t){Object(c.a)(this,e),this.name=t}return Object(i.a)(e,[{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.log.apply(this,[r.debug,e].concat(n))}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.log.apply(this,[r.info,e].concat(n))}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.log.apply(this,[r.warn,e].concat(n))}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.log.apply(this,[r.error,e].concat(n))}},{key:"log",value:function(e,t){var n,c,i,u;if(!(e<a)){for(var o="[".concat(this.name,"] ").concat(t),s=arguments.length,l=new Array(s>2?s-2:0),d=2;d<s;d++)l[d-2]=arguments[d];switch(e){case r.debug:(n=console).debug.apply(n,[o].concat(l));break;case r.info:(c=console).info.apply(c,[o].concat(l));break;case r.warn:(i=console).warn.apply(i,[o].concat(l));break;case r.error:(u=console).error.apply(u,[o].concat(l))}}}}]),e}();function s(e){return new o(e)}u("warn"),window.__setLogLevel=u},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(6),a=n(33),c=(n(0),n(2)),i=["className","colour","children","onClick"],u=function(e,t){switch(t=(t||"")+" ",e){case"red":return t+"bg-red-500 border-red-700 hover:bg-red-400 hover:border-red-500";case"green":return t+"bg-green-500 border-green-700 hover:bg-green-400 hover:border-green-500";case"yellow":return t+"bg-yellow-500 border-yellow-700 hover:bg-yellow-400 hover:border-yellow-500"}return t+"bg-purple-500 border-purple-700 hover:bg-purple-400 hover:border-purple-500"};t.b=function(e){var t=e.className,n=e.colour,o=e.children,s=e.onClick,l=Object(a.a)(e,i),d=u(n,t);return Object(c.jsx)("button",Object(r.a)(Object(r.a)({},l),{},{className:d,onClick:s,children:o}))}},30:function(e,t,n){"use strict";var r,a=n(1),c=n.n(a),i=n(3),u=n(25),o=n(14),s=n(9),l=n(52),d=n(47),f=Object(u.a)("Twitch Chat"),p=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r)||void 0===t?void 0:t.disconnect();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("Joining channel",t),e.next=3,r.join(t.toLowerCase());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={connect:function(){r=new l.Client({options:{debug:!1,skipUpdatingEmotesets:!0,skipMembership:!0},logger:{error:f.error.bind(f),info:f.info.bind(f),warn:f.warn.bind(f)},identity:{username:s.g.get(),password:"oauth:".concat(s.a.get())},connection:{reconnect:!0,secure:!0}}),f.info("Connecting and authenticating..."),r.connect().then((function(){f.info("Connected."),b(s.f.get())})).catch(f.error.bind(f)),r.on("disconnected",(function(e){return f.info("Disconnected:",e)})),r.on("message",(function(e,t,n,r){return r||function(e,t){if(o.b.get()){var n=t.indexOf("http");if(n>=0){var r=t.indexOf(" ",n),a=t.slice(n,r>0?r:void 0);f.debug("Found url:",a),d.a.findByUrl(a).then((function(t){t&&(t.url=a,t.submitter=e["display-name"]||e.username,Object(o.c)(t))}))}}}(t,n)})),r.on("messagedeleted",(function(e,t,n){})),r.on("timeout",(function(e,t){}))},disconnect:p,joinChannel:b,leaveChannel:function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("Leaving channel",t),e.next=3,r.part(t.toLowerCase());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=h},45:function(e,t){},47:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(53),i=n(3),u=n(6),o=n(24),s=n(18),l=n.n(s),d=n(9),f=l.a.create({baseURL:"https://api.twitch.tv/helix/",headers:{"Client-ID":"ryrnsuk3r4howfd6jac8lamdan279v"}}),p={getClip:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("clips?id=".concat(t),{headers:{Authorization:"Bearer ".concat(d.a.get())}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getVideo:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("videos?id=".concat(t),{headers:{Authorization:"Bearer ".concat(d.a.get())}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGame:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("games?id=".concat(t),{headers:{Authorization:"Bearer ".concat(d.a.get())}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=n(7),h=Object(b.a)("gamesDictionary",{}),v=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=h.get())[t]){e.next=3;break}return e.abrupt("return",n[t]);case 3:return e.next=5,p.getGame(t);case 5:if(!(r=e.sent)){e.next=9;break}return h.set((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},t,r.name))})),e.abrupt("return",r.name);case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=n(14),g=function(e){var t=new URL(e);return"clips.twitch.tv"===t.hostname||!(!t.hostname.endsWith("twitch.tv")||!t.pathname.includes("/clip/"))},m=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),g(t)){e.next=4;break}return e.abrupt("return");case 4:if(r=n.pathname.lastIndexOf("/"),c=n.pathname.slice(r).split("?")[0].slice(1),!(i=Object(j.i)({provider:"twitch-clip",id:c}))){e.next=9;break}return e.abrupt("return",Object(u.a)({},i));case 9:return e.next=11,p.getClip(c);case 11:if(!(o=e.sent)){e.next=21;break}return e.t0=c,e.t1=o.broadcaster_name,e.next=17,v(o.game_id);case 17:return e.t2=e.sent,e.t3=o.thumbnail_url,e.t4=o.title,e.abrupt("return",{id:e.t0,channel:e.t1,game:e.t2,provider:"twitch-clip",thumbnailUrl:e.t3,title:e.t4});case 21:e.next=25;break;case 23:e.prev=23,e.t5=e.catch(0);case 25:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),w={canHandle:g,tryGetClip:m},O=function(e){var t=new URL(e);return!(!t.hostname.endsWith("twitch.tv")||!t.pathname.includes("/videos/"))},x=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),O(t)){e.next=4;break}return e.abrupt("return");case 4:if(r=n.pathname.lastIndexOf("/"),c=n.pathname.slice(r).split("?")[0].slice(1),!(i=Object(j.i)({provider:"twitch-vod",id:c}))){e.next=9;break}return e.abrupt("return",Object(u.a)({},i));case 9:return e.next=11,p.getVideo(c);case 11:if(!(o=e.sent)){e.next=14;break}return e.abrupt("return",{id:c,channel:o.user_name,provider:"twitch-vod",thumbnailUrl:o.thumbnail_url.replace("%{width}x%{height}","480x272"),title:o.title,startTime:null!==(s=n.searchParams.get("t"))&&void 0!==s?s:void 0});case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),k={canHandle:O,tryGetClip:x},y={getClip:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("https://www.youtube.com/oembed?format=json&url=https://www.youtube.com/watch?v=".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},C=function(e){var t=new URL(e);return"youtu.be"===t.hostname||!!t.hostname.endsWith("youtube.com")},_=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i,o,s,l,d,f,p,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=new URL(t),C(t)){e.next=4;break}return e.abrupt("return");case 4:if(s=void 0,"youtu.be"===o.hostname?(l=o.pathname.lastIndexOf("/")+1,s=o.pathname.slice(l).split("?")[0]):o.hostname.endsWith("youtube.com")&&(s=null!==(d=o.searchParams.get("v"))&&void 0!==d?d:void 0),s){e.next=8;break}return e.abrupt("return");case 8:if(f=null!==(n=o.searchParams.get("t"))&&void 0!==n?n:void 0,!(p=Object(j.i)({provider:"youtube",id:s}))){e.next=12;break}return e.abrupt("return",Object(u.a)({},p));case 12:return e.next=14,y.getClip(s);case 14:return b=e.sent,e.abrupt("return",{id:s,channel:null!==(r=null===b||void 0===b?void 0:b.author_name)&&void 0!==r?r:"YouTube",thumbnailUrl:null!==(c=null===b||void 0===b?void 0:b.thumbnail_url)&&void 0!==c?c:"https://i.ytimg.com/vi/".concat(s,"/hqdefault.jpg"),provider:"youtube",title:null!==(i=null===b||void 0===b?void 0:b.title)&&void 0!==i?i:s,startTime:f});case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),L=[w,k,{canHandle:C,tryGetClip:_}],U={findByUrl:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(c.a)(L),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=14;break}if((i=r.value).canHandle(t)){e.next=7;break}return e.abrupt("continue",12);case 7:return e.next=9,i.tryGetClip(t);case 9:if(!(u=e.sent)){e.next=12;break}return e.abrupt("return",u);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return e.abrupt("return",void 0);case 23:case"end":return e.stop()}}),e,null,[[1,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()};t.a=U},60:function(e,t,n){},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(15),a=n(51);function c(e,t){var n=Object(r.a)(t);return n.attach(Object(a.a)(e)),n}function i(e,t){return e.id===t.id&&e.provider===t.provider}},87:function(e,t){},9:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return j}));var r=n(1),a=n.n(r),c=n(3),i=n(13),u=n(17),o=n(30),s=n(7),l=Object(s.a)("isLoggedIn",!1),d=Object(s.a)("accessToken",null),f=Object(s.a)("idToken",null),p=Object(s.a)("userName",null),b=Object(s.a)("userChannel",null),h=function(e,t,n){d.set(e),f.set(t),p.set(n),b.set(n),l.set(!0),Object(i.a)("user-logged-in")},v=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.get(),d.set(null),f.set(null),p.set(null),b.set(null),l.set(!1),!t){e.next=9;break}return e.next=9,u.a.revokeToken(t);case 9:Object(i.a)("user-logged-out");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){o.a.leaveChannel(b.get()),b.set(e),o.a.joinChannel(e),Object(i.a)("channel-changed")}}},[[100,1,2]]]);
//# sourceMappingURL=main.fd6a4ac2.chunk.js.map