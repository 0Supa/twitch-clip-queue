(this["webpackJsonptwitch-clip-queue"]=this["webpackJsonptwitch-clip-queue"]||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(14),a=n(46);function c(e,t){return Object(r.a)(t,[Object(a.a)(e)])}function i(e,t){return e.id===t.id&&e.provider===t.provider}},13:function(e,t,n){"use strict";n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return p})),n.d(t,"k",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return g}));var r=n(19),a=n(6),c=n(14),i=n(12),u=Object(i.a)("currentClip",{}),o=Object(i.a)("clipQueue",[]),s=Object(i.a)("clipMemory",[]),l=Object(c.a)(!1),d=function(e){var t,n,c=h(e);if(c){if(!(c.submitter===e.submitter||null!==(t=null===(n=c.submitters)||void 0===n?void 0:n.includes(e.submitter))&&void 0!==t&&t)){var u,l=Object(a.a)(Object(a.a)({},c),{},{submitters:[].concat(Object(r.a)(null!==(u=null===c||void 0===c?void 0:c.submitters)&&void 0!==u?u:[]),[e.submitter])});o.set((function(e){return e.map((function(e){return Object(i.b)(e,l)?l:e})).sort((function(e,t){var n,r,a,c;return(null!==(n=null===(r=t.submitters)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-(null!==(a=null===(c=e.submitters)||void 0===c?void 0:c.length)&&void 0!==a?a:0)}))}))}}else b(e)||(s.set((function(t){return[].concat(Object(r.a)(null!==t&&void 0!==t?t:[]),[e])})),o.set((function(t){return[].concat(Object(r.a)(null!==t&&void 0!==t?t:[]),[e])})))},f=function(){o.set((function(e){var t=(null!==e&&void 0!==e?e:[]).shift();return u.set(null!==t&&void 0!==t?t:{}),Object(r.a)(e)}))},b=function(e){var t,n=s.get();return null!==(t=null===n||void 0===n?void 0:n.find((function(t){return Object(i.b)(t,e)})))&&void 0!==t?t:void 0},h=function(e){var t,n=o.get();return null!==(t=null===n||void 0===n?void 0:n.find((function(t){return Object(i.b)(t,e)})))&&void 0!==t?t:void 0},p=function(e){var t=h(e);t&&(u.set(t),v(t))},v=function(e){o.set((function(t){return t.filter((function(t){return!Object(i.b)(t,e)}))}))},m=function(){o.set([]),u.set({})},j=function(){var e;s.set(Object(r.a)(null!==(e=o.get())&&void 0!==e?e:[]))},g=function(e){l.set(e)}},16:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(4),i=n(17),u=n.n(i),o=n(8),s="ryrnsuk3r4howfd6jac8lamdan279v",l=function(){return encodeURI("https://id.twitch.tv/oauth2/authorize?client_id=".concat(s)+"&redirect_uri=".concat("https://jakemiki.github.io/twitch-clip-queue/")+'&response_type=token id_token&scope=openid chat:read&claims={"id_token":{"preferred_username":null}}')};var d={getLoginUrl:l,redirectToLogin:function(){window.location.assign(l())},processAuth:function(){if(window.location.hash){var e,t,n=window.location.hash.substring(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(decodeURIComponent(n[1])),e}),{});if(window.location.hash="",n.access_token&&n.id_token)n.decodedIdToken=function(e){if(!e)return;var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}(n.id_token),Object(o.d)(n.access_token,n.id_token,null!==(e=null===(t=n.decodedIdToken)||void 0===t?void 0:t.preferred_username)&&void 0!==e?e:"")}},revokeToken:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("https://id.twitch.tv/oauth2/revoke?client_id=".concat(s,"&token=").concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=d},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(6),a=n(29),c=(n(0),n(2)),i=["className","colour","children","onClick"],u=function(e,t){switch(t=(t||"")+" ",e){case"red":return t+"bg-red-500 border-red-700 hover:bg-red-400 hover:border-red-500";case"green":return t+"bg-green-500 border-green-700 hover:bg-green-400 hover:border-green-500";case"yellow":return t+"bg-yellow-500 border-yellow-700 hover:bg-yellow-400 hover:border-yellow-500"}return t+"bg-purple-500 border-purple-700 hover:bg-purple-400 hover:border-purple-500"};t.b=function(e){var t=e.className,n=e.colour,o=e.children,s=e.onClick,l=Object(a.a)(e,i),d=u(n,t);return Object(c.jsx)("button",Object(r.a)(Object(r.a)({},l),{},{className:d,onClick:s,children:o}))}},26:function(e,t,n){"use strict";var r,a=n(13),c=n(8),i=n(40),u=function(e){r.send(e)},o=function(e){console.log("[TwitchChat] Joining channel",e),u("JOIN #".concat(e.toLowerCase()))},s={connect:function(){(r=new WebSocket("wss://irc-ws.chat.twitch.tv:443","irc")).onopen=function(){null!==r&&1===r.readyState&&(console.log("[TwitchChat] Connecting and authenticating..."),u("CAP REQ :twitch.tv/tags"),u("PASS oauth:".concat(c.a.get())),u("NICK ".concat(c.g.get())),o(c.f.get()))},r.onclose=function(){console.log("[TwitchChat] Disconnected")},r.onerror=function(e){console.warn("[TwitchChat] Error:",e)},r.onmessage=function(e){var t=e.data;t.startsWith("PING")&&u("PONG :tmi.twitch.tv");var n=function(e){var t="@"===e[0]?e.indexOf(" "):-1,n=e.indexOf(" ",t+1),r=e.indexOf(" ",n+1),a=t>0?e.slice(1,t).split(";").reduce((function(e,t){var n=t.split("=",2);return e[n[0]]=n[1],e}),{}):{},c=e.slice(t+2,e.indexOf("!",t+2)),i=e.slice(n+1,r);if("PRIVMSG"===i){var u=e.indexOf(" ",r+1),o=e.indexOf(":",u+1),s=e.slice(r+2,u),l=e.slice(o+1).trim();return{channel:s,user:a["display-name"]||c,command:i,message:l,tags:a}}return{raw:e,user:a["display-name"]||c,command:i,tags:a}}(t);if("PRIVMSG"===n.command&&n.message){if(!a.b.get())return;var r=n.message.indexOf("http");if(r>=0){var c=n.message.indexOf(" ",r),o=n.message.slice(r,c>0?c:void 0);console.log("[TwitchChat] Found url:",o),i.a.findByUrl(o).then((function(e){e&&(e.url=o,e.submitter=n.user,Object(a.c)(e))}))}}}},disconnect:function(){r.close()},joinChannel:o,leaveChannel:function(e){console.log("[TwitchChat] Leaving channel",e),u("PART #".concat(e.toLowerCase()))}};t.a=s},40:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(43),i=n(4),u=n(6),o=n(22),s=n(17),l=n.n(s),d=n(8),f=l.a.create({baseURL:"https://api.twitch.tv/helix/",headers:{"Client-ID":"ryrnsuk3r4howfd6jac8lamdan279v"}}),b={getClip:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("clips?id=".concat(t),{headers:{Authorization:"Bearer ".concat(d.a.get())}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getVideo:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("videos?id=".concat(t),{headers:{Authorization:"Bearer ".concat(d.a.get())}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGame:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("games?id=".concat(t),{headers:{Authorization:"Bearer ".concat(d.a.get())}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=n(12),p=Object(h.a)("gamesDictionary",{}),v=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=p.get())[t]){e.next=3;break}return e.abrupt("return",n[t]);case 3:return e.next=5,b.getGame(t);case 5:if(!(r=e.sent)){e.next=9;break}return p.set((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},t,r.name))})),e.abrupt("return",r.name);case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=n(13),j=function(e){var t=new URL(e);return"clips.twitch.tv"===t.hostname||!(!t.hostname.endsWith("twitch.tv")||!t.pathname.includes("/clip/"))},g=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),j(t)){e.next=4;break}return e.abrupt("return");case 4:if(r=n.pathname.lastIndexOf("/"),c=n.pathname.slice(r).split("?")[0].slice(1),!(i=Object(m.i)({provider:"twitch-clip",id:c}))){e.next=9;break}return e.abrupt("return",Object(u.a)({},i));case 9:return e.next=11,b.getClip(c);case 11:if(!(o=e.sent)){e.next=21;break}return e.t0=c,e.t1=o.broadcaster_name,e.next=17,v(o.game_id);case 17:return e.t2=e.sent,e.t3=o.thumbnail_url,e.t4=o.title,e.abrupt("return",{id:e.t0,channel:e.t1,game:e.t2,provider:"twitch-clip",thumbnailUrl:e.t3,title:e.t4});case 21:e.next=25;break;case 23:e.prev=23,e.t5=e.catch(0);case 25:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),w={canHandle:j,tryGetClip:g},O=function(e){var t=new URL(e);return!(!t.hostname.endsWith("twitch.tv")||!t.pathname.includes("/videos/"))},x=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),O(t)){e.next=4;break}return e.abrupt("return");case 4:if(r=n.pathname.lastIndexOf("/"),c=n.pathname.slice(r).split("?")[0].slice(1),!(i=Object(m.i)({provider:"twitch-vod",id:c}))){e.next=9;break}return e.abrupt("return",Object(u.a)({},i));case 9:return e.next=11,b.getVideo(c);case 11:if(!(o=e.sent)){e.next=14;break}return e.abrupt("return",{id:c,channel:o.user_name,provider:"twitch-vod",thumbnailUrl:o.thumbnail_url.replace("%{width}x%{height}","480x272"),title:o.title,startTime:null!==(s=n.searchParams.get("t"))&&void 0!==s?s:void 0});case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),k={canHandle:O,tryGetClip:x},y={getClip:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("https://www.youtube.com/oembed?format=json&url=https://www.youtube.com/watch?v=".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},C=function(e){var t=new URL(e);return"youtu.be"===t.hostname||!!t.hostname.endsWith("youtube.com")},_=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i,o,s,l,d,f,b,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=new URL(t),C(t)){e.next=4;break}return e.abrupt("return");case 4:if(s=void 0,"youtu.be"===o.hostname?(l=o.pathname.lastIndexOf("/")+1,s=o.pathname.slice(l).split("?")[0]):o.hostname.endsWith("youtube.com")&&(s=null!==(d=o.searchParams.get("v"))&&void 0!==d?d:void 0),s){e.next=8;break}return e.abrupt("return");case 8:if(f=null!==(n=o.searchParams.get("t"))&&void 0!==n?n:void 0,!(b=Object(m.i)({provider:"youtube",id:s}))){e.next=12;break}return e.abrupt("return",Object(u.a)({},b));case 12:return e.next=14,y.getClip(s);case 14:return h=e.sent,e.abrupt("return",{id:s,channel:null!==(r=null===h||void 0===h?void 0:h.author_name)&&void 0!==r?r:"YouTube",thumbnailUrl:null!==(c=null===h||void 0===h?void 0:h.thumbnail_url)&&void 0!==c?c:"https://i.ytimg.com/vi/".concat(s,"/hqdefault.jpg"),provider:"youtube",title:null!==(i=null===h||void 0===h?void 0:h.title)&&void 0!==i?i:s,startTime:f});case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),T=[w,k,{canHandle:C,tryGetClip:_}],I={findByUrl:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(c.a)(T),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=14;break}if((i=r.value).canHandle(t)){e.next=7;break}return e.abrupt("continue",12);case 7:return e.next=9,i.tryGetClip(t);case 9:if(!(u=e.sent)){e.next=12;break}return e.abrupt("return",u);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return e.abrupt("return",void 0);case 23:case"end":return e.stop()}}),e,null,[[1,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()};t.a=I},51:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(42),i=n.n(c),u=(n(51),n(44)),o=n(3),s=n(23),l=n(16),d=n(8),f=n(2),b=a.a.lazy((function(){return n.e(3).then(n.bind(null,82))})),h=a.a.lazy((function(){return n.e(4).then(n.bind(null,81))}));var p=function(){var e=d.c.use();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("header",{className:"flex",children:[Object(f.jsx)("h1",{className:"mb-4",children:"Twitch Clip Queue"}),Object(f.jsx)("div",{className:"flex-grow"}),Object(f.jsx)("div",{children:e?Object(f.jsx)(s.b,{onClick:function(){return Object(d.e)()},children:"Logout"}):Object(f.jsx)(s.b,{onClick:function(){return l.a.redirectToLogin()},children:"Login with Twitch"})})]}),Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)("div",{}),children:Object(f.jsx)(u.a,{basename:"/twitch-clip-queue/",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",children:e?Object(f.jsx)(h,{}):Object(f.jsx)(b,{})}),Object(f.jsx)(o.b,{path:"*",children:Object(f.jsx)(o.a,{to:"/"})})]})})}),Object(f.jsx)("div",{className:"flex-grow"}),Object(f.jsxs)("footer",{className:"text-xs mt-4",children:["Created by"," ",Object(f.jsx)("span",{className:"font-bold",children:Object(f.jsx)("a",{href:"https://github.com/JakeMiki",target:"_blank",rel:"noreferrer",children:"JakeMiki"})})]})]})},v=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,80)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root")),v(),l.a.processAuth()},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return v}));var r=n(1),a=n.n(r),c=n(4),i=n(14),u=n(16),o=n(26),s=Object(i.a)(!1),l=Object(i.a)(null),d=Object(i.a)(null),f=Object(i.a)(null),b=Object(i.a)(null),h=function(e,t,n){l.set(e),d.set(t),f.set(n),b.set(n),s.set(!0)},p=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.get(),l.set(null),d.set(null),f.set(null),b.set(null),s.set(!1),!t){e.next=9;break}return e.next=9,u.a.revokeToken(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){o.a.leaveChannel(b.get()),b.set(e),o.a.joinChannel(e)}}},[[77,1,2]]]);
//# sourceMappingURL=main.ea0e19f1.chunk.js.map