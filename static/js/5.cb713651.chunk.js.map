{"version":3,"sources":["components/Button.tsx","pages/Header.tsx","pages/Page.tsx","components/Toggle.tsx","pages/Queue/ClipCard.tsx","pages/Queue/ClipRoll.tsx","pages/Queue/Player.tsx","pages/Queue/QueuePage.tsx"],"names":["addButtonColour","colour","classes","Button","className","children","onClick","props","Header","loggedIn","useState","isLoggedIn","get","a","logOut","TwitchAuth","redirectToLogin","Page","fullWidth","klass","Toggle","pressed","ClipCard","clip","thumbnailUrl","id","provider","url","title","game","submitter","submitters","channel","submitterCount","length","src","alt","selectCurrentClip","href","target","rel","displayName","userName","removeClip","ClipRoll","clips","isAcceptingClips","acceptingClips","clipRenderer","index","key","width","height","rowCount","rowHeight","rowRenderer","noRowsRenderer","PlayerSwitch","undefined","window","location","hostname","allowFullScreen","startTime","Player","timestamp","reloadClip","formatDistanceToNow","parseISO","QueuePage","advancedVisible","setAdvancedVisible","useHookState","clipQueue","clipMem","clipMemory","current","currentClip","token","accessToken","name","userChannel","useEffect","TwitchChat","connect","disconnect","hash","nextClip","acceptClips","clearQueue","newChannel","prompt","changeChannel","message","getUrlFromMessage","ClipFinder","findByUrl","then","Date","now","toString","addClip","clearMemory"],"mappings":"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","file":"static/js/5.cb713651.chunk.js","sourcesContent":["import React, { ButtonHTMLAttributes, ReactNode } from 'react';\r\n\r\ninterface ButtonProps extends ButtonHTMLAttributes<any> {\r\n  className?: string;\r\n  colour?: string;\r\n  children?: ReactNode | undefined;\r\n\r\n  onClick: () => void;\r\n}\r\n\r\nexport const addButtonColour = (colour: string | undefined, classes: string | undefined) => {\r\n  classes = (classes || '') + ' ';\r\n\r\n  switch (colour) {\r\n    case 'red':\r\n      return classes + 'bg-red-500 border-red-700 hover:bg-red-400 hover:border-red-500';\r\n    case 'green':\r\n      return classes + 'bg-green-500 border-green-700 hover:bg-green-400 hover:border-green-500';\r\n    case 'yellow':\r\n      return classes + 'bg-yellow-500 border-yellow-700 hover:bg-yellow-400 hover:border-yellow-500';\r\n  }\r\n\r\n  return classes + 'bg-purple-500 border-purple-700 hover:bg-purple-400 hover:border-purple-500';\r\n};\r\n\r\nfunction Button({ className, colour, children, onClick, ...props }: ButtonProps) {\r\n  let classes = addButtonColour(colour, className);\r\n\r\n  return (\r\n    <button {...props} className={classes} onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import { useState } from \"@hookstate/core\";\nimport Button from \"../components/Button\";\nimport TwitchAuth from \"../services/TwitchAuth\";\nimport { isLoggedIn, logOut } from \"../store/user\";\n\nfunction Header() {\n  const loggedIn = useState(isLoggedIn);\n\n  return (\n    <header className=\"flex mb-4 pl-16 pr-32 pt-2 pb-2 bg-gray-800\">\n      <h1>Twitch Clip Queue</h1>\n      <div className=\"flex-grow\"></div>\n      <div>\n        {loggedIn.get() ? (\n          <Button onClick={async () => await logOut()}>Logout</Button>\n        ) : (\n          <Button\n            onClick={() => TwitchAuth.redirectToLogin()}\n          >\n            Login with Twitch\n          </Button>\n        )}\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import React, { ReactNode } from 'react';\nimport Header from './Header';\n\ninterface PageProps {\n  fullWidth?: boolean;\n\n  children?: ReactNode | undefined;\n}\n\nfunction Page({ children, fullWidth = false }: PageProps) {\n  const klass = fullWidth ? 'w-full px-16' : 'lg:container lg:mx-auto';\n  return (\n    <>\n      <Header />\n      <div className={klass}>{children}</div>\n    </>\n  );\n}\n\nexport default Page;\n","import React, { ButtonHTMLAttributes, ReactNode } from 'react';\r\nimport { addButtonColour } from './Button';\r\n\r\ninterface ToggleProps extends ButtonHTMLAttributes<any> {\r\n  pressed: boolean;\r\n  className?: string;\r\n  colour?: string;\r\n  children?: ReactNode | undefined;\r\n\r\n  onClick: () => void;\r\n}\r\n\r\nfunction Toggle({ pressed, className, colour, children, onClick, ...props }: ToggleProps) {\r\n  let classes = addButtonColour(colour, className);\r\n\r\n  if (pressed) {\r\n    classes += ' pressed';\r\n  }\r\n\r\n  return (\r\n    <button {...props} className={classes} onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Toggle;\r\n","import React from 'react';\nimport Button from '../../components/Button';\nimport { Clip } from '../../models';\nimport { removeClip, selectCurrentClip } from '../../store/queue';\n\nexport interface ClipCardProps {\n  clip: Clip;\n}\n\nfunction ClipCard({ clip }: ClipCardProps) {\n  const { thumbnailUrl, id, provider, url, title, game, submitter, submitters, channel } = clip;\n  const submitterCount = submitters?.length ?? 0;\n  return (\n    <div className={'clip max-w-sm rounded overflow-hidden flex flex-col '}>\n      {thumbnailUrl && <img className=\"w-full cursor-pointer\" src={thumbnailUrl} alt={title} onClick={() => selectCurrentClip({ id, provider })}/>}\n      <div className=\"h-full w-full relative\">\n        <div className=\"px-2 py-1 \">\n          <h4 className=\"font-bold text-sm mb-1 w-full overflow-hidden whitespace-nowrap overflow-ellipsis\">\n            <a className=\"text-black no-underline\" href={url} target=\"_blank\" rel=\"noreferrer\">\n              {title}\n            </a>\n          </h4>\n          <p className=\"text-gray-900 text-xs mb-1 font-normal\">\n            <span className=\"font-bold\">{channel} </span>\n            {game && (\n              <span>\n                playing&nbsp;<span className=\"font-bold\">{game}</span>\n              </span>\n            )}\n          </p>\n          <p className=\"text-gray-900 text-xs font-normal\">\n            {submitter && (\n              <>\n                Submitted by <span className=\"font-bold\">{submitter.displayName ?? submitter.userName}</span>\n              </>\n            )}\n            <span className=\"text-xs\">{submitterCount > 0 && ' +' + submitterCount}</span>\n          </p>\n        </div>\n        <div className=\"absolute flex right-1 bottom-1 clip-buttons space-x-1\">\n          <Button colour=\"green\" onClick={() => selectCurrentClip({ id, provider })}>\n            &raquo;\n          </Button>\n          <Button colour=\"red\" onClick={() => removeClip({ id, provider })}>\n            &times;\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ClipCard;\n","import React from 'react';\nimport { Clip } from '../../models';\nimport ClipCard from './ClipCard';\nimport { AutoSizer, List, ListRowRenderer } from 'react-virtualized';\nimport { useState } from '@hookstate/core';\nimport { acceptingClips } from '../../store/queue';\n\nexport interface ClipRollProps {\n  clips: Clip[];\n  clipLimit?: number;\n}\n\nfunction ClipRoll({ clips }: ClipRollProps) {\n  const isAcceptingClips = useState(acceptingClips).get();\n\n  const clipRenderer: ListRowRenderer = ({ index, key }) => (\n    <div key={key} className=\"mb-4\">\n      <ClipCard clip={clips[index]} />\n    </div>\n  );\n\n  return (\n    <div className=\"w-full h-full\">\n      <AutoSizer>\n        {({ width, height }) => (\n          <List\n            className=\"custom-scroll\"\n            height={height}\n            rowCount={clips.length}\n            rowHeight={256}\n            rowRenderer={clipRenderer}\n            noRowsRenderer={() => <strong>No clips in queue. {isAcceptingClips && <>Send some in chat!</>}</strong>}\n            width={width}\n          />\n        )}\n      </AutoSizer>\n    </div>\n  );\n}\n\nexport default ClipRoll;\n","import React from 'react';\r\nimport { formatDistanceToNow, parseISO } from 'date-fns';\r\nimport { Clip } from '../../models';\r\nimport { CommonProps } from '../../common/props';\r\nimport { reloadClip } from '../../store/queue';\r\n\r\nexport interface PlayerProps extends CommonProps {\r\n  clip: Clip;\r\n}\r\n\r\nfunction Player(props: PlayerProps) {\r\n  const {\r\n    clip: { channel, title, timestamp, startTime, game, submitter, submitters },\r\n  } = props;\r\n  const submitterCount = submitters?.length ?? 0;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"player player-container\">\r\n        <PlayerSwitch {...props} />\r\n      </div>\r\n      <div className=\"player-title-container\">\r\n        <h2 className=\"font-bold mb-1\">\r\n          {title ?? <>&nbsp;</>}\r\n          {startTime && (\r\n            <small className=\"text-gray-700\">\r\n              {' ('}start at{' '}\r\n              <span className=\"cursor-pointer underline\" onClick={() => reloadClip()}>\r\n                {startTime}\r\n              </span>\r\n              {')'}\r\n            </small>\r\n          )}\r\n        </h2>\r\n        <p className=\"text-gray-500 text-sm font-normal\">\r\n          {channel ? (\r\n            <>\r\n              <span className=\"font-bold\">{channel}</span>\r\n              {game && (\r\n                <span>\r\n                  &nbsp;playing&nbsp;<span className=\"font-bold\">{game}</span>\r\n                </span>\r\n              )}\r\n              , submitted by <span className=\"font-bold\">{submitter?.displayName ?? submitter?.userName}</span>\r\n              {submitterCount > 0 && <span> and {submitterCount} other(s)</span>}\r\n              {timestamp && <span>, created {formatDistanceToNow(parseISO(timestamp))} ago</span>}\r\n            </>\r\n          ) : (\r\n            <>&nbsp;</>\r\n          )}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction PlayerSwitch({ clip }: PlayerProps) {\r\n  switch (clip.provider) {\r\n    case undefined:\r\n      return <></>;\r\n    case 'twitch-clip':\r\n      return (\r\n        <iframe\r\n          src={`https://clips.twitch.tv/embed?clip=${clip.id}&autoplay=true&parent=${window.location.hostname}`}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          className=\"player\"\r\n          allowFullScreen={true}\r\n          title={clip.title}\r\n        ></iframe>\r\n      );\r\n    case 'twitch-vod':\r\n      return (\r\n        <iframe\r\n          src={`https://player.twitch.tv/?video=${clip.id}&autoplay=true&parent=${window.location.hostname}&time=${clip.startTime}`}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          className=\"player\"\r\n          allowFullScreen={true}\r\n          title={clip.title}\r\n        ></iframe>\r\n      );\r\n    case 'youtube':\r\n      return (\r\n        <iframe\r\n          src={`https://www.youtube.com/embed/${clip.id}?autoplay=1&start=${clip.startTime ?? ''}`}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          className=\"player\"\r\n          allowFullScreen={true}\r\n          title={clip.title}\r\n        ></iframe>\r\n      );\r\n  }\r\n\r\n  return <span>Provider not supported: {clip.provider}</span>;\r\n}\r\n\r\nexport default Player;\r\n","import React, { useEffect, useState } from 'react';\nimport { useState as useHookState } from '@hookstate/core';\nimport Button from '../../components/Button';\nimport Toggle from '../../components/Toggle';\nimport ClipFinder from '../../services/ClipFinder';\nimport TwitchChat from '../../services/TwitchChat';\nimport {\n  acceptClips,\n  acceptingClips,\n  addClip,\n  clearMemory,\n  clearQueue,\n  clipMemory,\n  clipQueue,\n  currentClip,\n  nextClip,\n  reloadClip,\n} from '../../store/queue';\nimport { accessToken, changeChannel, userChannel, userName } from '../../store/user';\nimport ClipRoll from './ClipRoll';\nimport Player from './Player';\nimport './styles.css';\nimport Page from '../Page';\nimport { getUrlFromMessage } from '../../common/utils';\n\nfunction QueuePage() {\n  const [advancedVisible, setAdvancedVisible] = useState(false);\n\n  const isAcceptingClips = useHookState(acceptingClips).get();\n  const clips = useHookState(clipQueue).get();\n  const clipMem = useHookState(clipMemory).get();\n  const current = useHookState(currentClip).get();\n\n  const token = useHookState(accessToken).get();\n  const name = useHookState(userName).get();\n  const channel = useHookState(userChannel).get();\n\n  useEffect(() => {\n    TwitchChat.connect();\n    return () => {\n      TwitchChat.disconnect();\n    };\n  }, [token]);\n\n  return (\n    <Page fullWidth={true}>\n      <div className=\"w-full queue-page\">\n        <Player clip={current} key={current.hash} />\n        <div className=\"buttons-container relative\">\n          <div className=\"flex w-full\">\n            <Button colour=\"green\" className=\"mr-2\" onClick={() => nextClip()}>\n              Next &raquo;\n            </Button>\n            <Toggle pressed={isAcceptingClips} className=\"mr-2\" onClick={() => acceptClips(!isAcceptingClips)}>\n              {isAcceptingClips ? <>Close the floodgates! 🌊</> : <>Open the floodgates! 🚪</>}\n            </Toggle>\n            <Button colour=\"red\" className=\"mr-2\" onClick={() => clearQueue()}>\n              &times; Clear queue <em>({clips.length})</em>\n            </Button>\n            <Toggle pressed={advancedVisible} colour=\"red\" onClick={() => setAdvancedVisible(!advancedVisible)}>\n              ⚙️\n            </Toggle>\n\n            <div className=\"ml-4 font-bold text-xl leading-loose\">\n              {isAcceptingClips\n                ? 'Clip submissions are open. Send some clips in chat!'\n                : \"Clip submissions are closed.\"}\n            </div>\n          </div>\n          {advancedVisible && (\n            <div className=\"absolute flex -top-20 pb-1 pt-7 bg-gray-900 bg-opacity-70\">\n              <Button\n                className=\"mr-2\"\n                onClick={() => {\n                  const newChannel = prompt('Enter channel to read chat from', channel as string);\n                  if (newChannel && newChannel !== channel) {\n                    changeChannel(newChannel);\n                  }\n                }}\n              >\n                Change channel <em>({channel})</em>\n              </Button>\n              <Button\n                className=\"mr-2\"\n                onClick={() => {\n                  const message = prompt('Enter clip url', '');\n                  const url = getUrlFromMessage(message ?? '');\n                  if (url) {\n                    ClipFinder.findByUrl(url).then((clip) => {\n                      if (clip) {\n                        clip.hash = Date.now().toString();\n                        clip.url = url;\n                        clip.submitter = { userName: name ?? '', displayName: name ?? '' };\n                        addClip(clip);\n                      }\n                    });\n                  }\n                }}\n              >\n                + Add cilp\n              </Button>\n              <Button\n                className=\"mr-2\"\n                onClick={() => reloadClip()}>\n                ♻️\n              </Button>\n              <Button\n                onClick={() => clearMemory()}\n                title=\"Remove all clips from permanent memory, allow all clips to be posted and queued again\"\n              >\n                &times; Purge memory <em>({clipMem.length})</em>\n              </Button>\n            </div>\n          )}\n        </div>\n        <div className=\"nextup-container\">\n          <div className=\"w-full flex border-b-2 mb-2 align-text-bottom\">\n            <h2>Next up</h2>\n            <div className=\"flex-grow\"></div>\n            <h2>{clips.length}</h2>\n          </div>\n          <ClipRoll clips={clips} />\n        </div>\n      </div>\n    </Page>\n  );\n}\n\nexport default QueuePage;\n"],"sourceRoot":""}