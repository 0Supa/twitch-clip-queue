(this["webpackJsonptwitch-clip-queue"]=this["webpackJsonptwitch-clip-queue"]||[]).push([[5],{109:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var r=c(15),l=c(111),n=(c(0),c(2)),s=["className","colour","children","onClick"],i=function(e,t){switch(t=(t||"")+" ",e){case"red":return t+"bg-red-500 border-red-700 hover:bg-red-400 hover:border-red-500";case"green":return t+"bg-green-500 border-green-700 hover:bg-green-400 hover:border-green-500";case"yellow":return t+"bg-yellow-500 border-yellow-700 hover:bg-yellow-400 hover:border-yellow-500"}return t+"bg-purple-500 border-purple-700 hover:bg-purple-400 hover:border-purple-500"};t.b=function(e){var t=e.className,c=e.colour,a=e.children,o=e.onClick,d=Object(l.a)(e,s),j=i(c,t);return Object(n.jsx)("button",Object(r.a)(Object(r.a)({},d),{},{className:j,onClick:o,children:a}))}},110:function(e,t,c){"use strict";c.d(t,"a",(function(){return l})),c.d(t,"b",(function(){return n}));c(0);var r=c(2);function l(e){var t=e.href,c=e.className,l=e.size,n=void 0===l?20:l,s=e.children;return Object(r.jsx)("div",{className:c,children:Object(r.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"block no-underline hover:underline",children:[Object(r.jsx)("svg",{viewBox:"0 0 16 16",width:n,height:n,className:"inline-block",children:Object(r.jsx)("path",{fill:"white","fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})," ",s]})})}function n(e){var t=e.href,c=e.className,l=e.size,n=void 0===l?20:l,s=e.children;return Object(r.jsx)("div",{className:c,children:Object(r.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:"block no-underline hover:underline",children:[Object(r.jsx)("svg",{x:"0px",y:"0px",viewBox:"0 0 2400 2800",width:n,height:n,className:"inline-block",children:Object(r.jsxs)("g",{fill:"white",children:[Object(r.jsx)("path",{d:"M500,0L0,500v1800h600v500l500-500h400l900-900V0H500z M2200,1300l-400,400h-400l-350,350v-350H600V200h1600 V1300z"}),Object(r.jsx)("rect",{x:"1700",y:"550",width:"200",height:"600"}),Object(r.jsx)("rect",{x:"1150",y:"550",width:"200",height:"600"})]})})," ",s]})})}},112:function(e,t,c){"use strict";c(0);var r=c(1),l=c.n(r),n=c(3),s=c(6),i=c(109),a=c(110),o=c(23),d=c(10),j=c(2);var b=function(){var e=Object(s.c)(d.c);return Object(j.jsxs)("header",{className:"flex mb-4 px-16 py-2 bg-gray-800",children:[Object(j.jsx)("h1",{children:"Twitch Clip Queue"}),e.get()&&Object(j.jsxs)("div",{className:"ml-8 pb-1 flex text-sm items-end",children:["by",Object(j.jsx)(a.a,{className:"ml-2 mr-1",size:16,href:"https://github.com/JakeMiki",children:"JakeMiki"}),"/",Object(j.jsx)(a.b,{className:"ml-1",size:16,href:"https://twitch.tv/SirMuffin9",children:"SirMuffin9"})]}),Object(j.jsx)("div",{className:"flex-grow"}),Object(j.jsx)("div",{children:e.get()?Object(j.jsx)(i.b,{onClick:Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Logout"}):Object(j.jsx)(i.b,{onClick:function(){return o.a.redirectToLogin()},children:"Login with Twitch"})})]})};t.a=function(e){var t=e.children,c=e.fullWidth,r=void 0!==c&&c?"w-full px-16":"lg:container lg:mx-auto";return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{className:r,children:t})]})}},136:function(e,t,c){},141:function(e,t,c){"use strict";c.r(t);var r=c(137),l=c(0),n=c(6),s=c(109),i=c(15),a=c(111),o=c(2),d=["pressed","className","colour","children","onClick"];var j=function(e){var t=e.pressed,c=e.className,r=e.colour,l=e.children,n=e.onClick,j=Object(a.a)(e,d),b=Object(s.a)(r,c);return t&&(b+=" pressed"),Object(o.jsx)("button",Object(i.a)(Object(i.a)({},j),{},{className:b,onClick:n,children:l}))},b=c(32),u=c(33),h=c(4),m=c(10);var p=function(e){var t,c,r=e.clip,l=r.thumbnailUrl,n=r.id,i=r.provider,a=r.url,d=r.title,j=r.game,b=r.submitter,u=r.submitters,m=r.channel,p=null!==(t=null===u||void 0===u?void 0:u.length)&&void 0!==t?t:0;return Object(o.jsxs)("div",{className:"clip max-w-sm rounded overflow-hidden flex flex-col ",children:[l&&Object(o.jsx)("img",{className:"w-full cursor-pointer",src:l,alt:d,onClick:function(){return Object(h.n)({id:n,provider:i})}}),Object(o.jsxs)("div",{className:"h-full w-full relative",children:[Object(o.jsxs)("div",{className:"px-2 py-1 ",children:[Object(o.jsx)("h4",{className:"font-bold text-sm mb-1 w-full overflow-hidden whitespace-nowrap overflow-ellipsis",children:Object(o.jsx)("a",{className:"text-black no-underline",href:a,target:"_blank",rel:"noreferrer",children:d})}),Object(o.jsxs)("p",{className:"text-gray-900 text-xs mb-1 font-normal",children:[Object(o.jsxs)("span",{className:"font-bold",children:[m," "]}),j&&Object(o.jsxs)("span",{children:["playing\xa0",Object(o.jsx)("span",{className:"font-bold",children:j})]})]}),Object(o.jsxs)("p",{className:"text-gray-900 text-xs font-normal",children:[b&&Object(o.jsxs)(o.Fragment,{children:["Submitted by ",Object(o.jsx)("span",{className:"font-bold",children:null!==(c=b.displayName)&&void 0!==c?c:b.userName})]}),Object(o.jsx)("span",{className:"text-xs",children:p>0&&" +"+p})]})]}),Object(o.jsxs)("div",{className:"absolute flex right-1 bottom-1 clip-buttons space-x-1",children:[Object(o.jsx)(s.b,{colour:"green",onClick:function(){return Object(h.n)({id:n,provider:i})},children:"\xbb"}),Object(o.jsx)(s.b,{colour:"red",onClick:function(){return Object(h.m)({id:n,provider:i})},children:"\xd7"})]})]})]})};var x=function(e){var t=e.clips,c=Object(n.c)(h.b).get();return Object(o.jsxs)("div",{className:"w-full overflow-y-scroll h-full",children:[!t.length&&Object(o.jsxs)("strong",{children:["No clips in queue. ",c&&Object(o.jsx)(o.Fragment,{children:"Send some in chat!"})]}),t.slice(0,100).map((function(e){return Object(o.jsx)("div",{className:"mb-4",children:Object(o.jsx)(p,{clip:e})},"".concat(e.provider,"_").concat(e.id))})),Object(o.jsx)("div",{className:"mb-16"})]})},O=c(117),f=c.n(O),v=c(140),g=c(143);function N(e){var t,c=e.clip,r=e.useReactPlayer,l=e.onEnded;if(r){var n,s=null!==(n=c.videoUrl)&&void 0!==n?n:c.url;if(s&&f.a.canPlay(s))return Object(o.jsx)(f.a,{url:s,height:"100%",width:"100%",className:"player",controls:!0,playing:!0,onEnded:l})}switch(c.provider){case void 0:return Object(o.jsx)(o.Fragment,{});case"twitch-clip":return Object(o.jsx)("iframe",{src:"https://clips.twitch.tv/embed?clip=".concat(c.id,"&autoplay=true&parent=").concat(window.location.hostname),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:c.title});case"twitch-vod":return Object(o.jsx)("iframe",{src:"https://player.twitch.tv/?video=".concat(c.id,"&autoplay=true&parent=").concat(window.location.hostname,"&time=").concat(c.startTime),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:c.title});case"youtube":return Object(o.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(c.id,"?autoplay=1&start=").concat(null!==(t=c.startTime)&&void 0!==t?t:""),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:c.title})}return Object(o.jsxs)("span",{children:["Provider not supported: ",c.provider]})}var w=function(e){var t,c,r=e.clip,l=r.channel,n=r.title,s=r.timestamp,a=r.startTime,d=r.game,j=r.submitter,b=r.submitters,u=r.url,m=null!==(t=null===b||void 0===b?void 0:b.length)&&void 0!==t?t:0;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"player player-container",children:Object(o.jsx)(N,Object(i.a)({},e))}),Object(o.jsxs)("div",{className:"player-title-container",children:[Object(o.jsxs)("h2",{className:"font-bold mb-1",children:[null!==n&&void 0!==n?n:Object(o.jsx)(o.Fragment,{children:"\xa0"}),a&&Object(o.jsxs)("small",{className:"text-gray-700",children:[" (","start at"," ",Object(o.jsx)("span",{className:"cursor-pointer underline",onClick:function(){return Object(h.l)()},children:a}),")"]}),u&&Object(o.jsxs)("span",{children:["\xa0",Object(o.jsx)("sup",{children:Object(o.jsx)("a",{href:u,target:"_blank",rel:"noreferrer",className:"text-gray-700 no-underline hover:text-gray-200",children:"\ud83d\uddd7"})})]})]}),Object(o.jsx)("p",{className:"text-gray-500 text-sm font-normal",children:l?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"font-bold",children:l}),d&&Object(o.jsxs)("span",{children:["\xa0playing\xa0",Object(o.jsx)("span",{className:"font-bold",children:d})]}),", submitted by ",Object(o.jsx)("span",{className:"font-bold",children:null!==(c=null===j||void 0===j?void 0:j.displayName)&&void 0!==c?c:null===j||void 0===j?void 0:j.userName}),m>0&&Object(o.jsxs)("span",{children:[" and ",m," other(s)"]}),s&&Object(o.jsxs)("span",{children:[", created ",Object(v.a)(Object(g.a)(s))," ago"]})]}):Object(o.jsx)(o.Fragment,{children:"\xa0"})})]})]})},y=(c(136),c(112)),k=c(31);t.default=function(){var e=Object(l.useState)(!1),t=Object(r.a)(e,2),c=t[0],i=t[1],a=Object(n.c)(h.b).get(),d=Object(n.c)(h.h).get(),p=Object(n.c)(h.g).get(),O=Object(n.c)(h.i).get(),f=Object(n.c)(m.a).get(),v=Object(n.c)(m.g).get(),g=Object(n.c)(m.f).get(),N=Object(n.c)(h.q).get(),C=Object(n.c)(h.d).get(),S=Object(n.c)(h.s).get(),F=Object(n.c)(h.p).get()>=N,q="Clip submissions are open. Send some clips in chat!";return a?N>0&&F&&(q="Clip limit reached. Send clips queued by others to boost them to the top \ud83d\udc46"):q="Clip submissions are closed.",Object(l.useEffect)((function(){return u.a.connect(),function(){u.a.disconnect()}}),[f]),Object(o.jsx)(y.a,{fullWidth:!0,children:Object(o.jsxs)("div",{className:"w-full queue-page",children:[Object(o.jsx)(w,{clip:O,useReactPlayer:S,onEnded:function(){return C&&setTimeout((function(){return h.d.get()&&d.length>0&&Object(h.k)()}),3e3)}},O.hash),Object(o.jsxs)("div",{className:"buttons-container relative",children:[Object(o.jsxs)("div",{className:"flex w-full",children:[Object(o.jsx)(s.b,{colour:"green",className:"mr-2",onClick:function(){return Object(h.k)()},children:"Next \xbb"}),Object(o.jsxs)(j,{pressed:C,colour:"green",className:"mr-2",onClick:function(){return Object(h.r)(!C)},children:["Autoplay is ",C?Object(o.jsx)(o.Fragment,{children:"on"}):Object(o.jsx)(o.Fragment,{children:"off"})]}),!!N&&Object(o.jsx)(s.b,{colour:"red",className:"mr-2",onClick:function(){return Object(h.k)(!0)},title:"Skipping a clip opens up a slot for another clip to be posted if gates are still open",children:"\xd7 Skip"}),Object(o.jsx)(j,{pressed:a,className:"mr-2",onClick:function(){return Object(h.a)(!a)},children:a?Object(o.jsx)(o.Fragment,{children:"Close the floodgates! \ud83c\udf0a"}):Object(o.jsx)(o.Fragment,{children:"Open the floodgates! \ud83d\udeaa"})}),Object(o.jsx)(j,{pressed:c,onClick:function(){return i(!c)},children:"\u2699\ufe0f"}),Object(o.jsx)("div",{className:"ml-4 font-bold text-xl leading-loose",children:q})]}),c&&Object(o.jsxs)("div",{className:"absolute flex -top-20 pb-1 pt-7 bg-gray-900 bg-opacity-70",children:[Object(o.jsxs)(s.b,{className:"mr-2",title:"Change channel to read clips from",onClick:function(){var e=prompt("Enter channel to read chat from",g);e&&e!==g&&Object(m.b)(e)},children:["Change channel ",Object(o.jsxs)("em",{children:["(",g,")"]})]}),Object(o.jsxs)(s.b,{className:"mr-2",title:"Soft clip limit - after set value no new clips are accepted, current clips can still be voted on",onClick:function(){var e=prompt("Set a soft limit after which no new clips will be accepted (0 to disable)",N.toString());null!==e&&Number.isInteger(+e)&&Object(h.o)(+e)},children:["Clip limit ",Object(o.jsxs)("em",{children:["(",N,")"]})]}),Object(o.jsx)(s.b,{className:"mr-2",title:"Add clip from url",onClick:function(){var e=prompt("Enter clip url",""),t=Object(k.a)(null!==e&&void 0!==e?e:"");t&&b.a.findByUrl(t).then((function(e){e&&(e.hash=Date.now().toString(),e.url=t,e.submitter={userName:null!==v&&void 0!==v?v:"",displayName:null!==v&&void 0!==v?v:""},Object(h.c)(e))}))},children:"+ Add clip"}),Object(o.jsx)(s.b,{className:"mr-2",title:"Reload current clip",onClick:function(){return Object(h.l)()},children:"\u267b\ufe0f Reload clip"}),Object(o.jsxs)(s.b,{className:"mr-2",onClick:function(){return Object(h.f)()},title:"Clear current queue",children:["\xd7 Clear queue ",Object(o.jsxs)("em",{children:["(",d.length,")"]})]}),Object(o.jsxs)(s.b,{onClick:function(){return Object(h.e)()},title:"Remove all clips from permanent memory, allow all clips to be queued again",children:["\xd7 Purge memory ",Object(o.jsxs)("em",{children:["(",p.length,")"]})]})]})]}),Object(o.jsxs)("div",{className:"nextup-container",children:[Object(o.jsxs)("div",{className:"w-full flex border-b-2 mb-2 align-text-bottom",children:[Object(o.jsx)("h2",{children:"Next up"}),Object(o.jsx)("div",{className:"flex-grow"}),Object(o.jsx)("h2",{children:d.length})]}),Object(o.jsx)(x,{clips:d})]})]})})}}}]);
//# sourceMappingURL=5.e7090f40.chunk.js.map