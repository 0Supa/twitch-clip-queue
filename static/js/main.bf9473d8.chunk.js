(this["webpackJsonptwitch-clip-queue"]=this["webpackJsonptwitch-clip-queue"]||[]).push([[0],{11:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n(14),c=n(41);function a(t,e){return Object(r.a)(e,[Object(c.a)(t)])}function i(t,e){return t.id===e.id&&t.provider===e.provider}},19:function(t,e,n){"use strict";var r=n(3),c=n.n(r),a=n(6),i=n(21),u=n.n(i),o=n(9),s="ryrnsuk3r4howfd6jac8lamdan279v";var l={redirectToLogin:function(){window.location.assign(encodeURI("https://id.twitch.tv/oauth2/authorize?client_id=".concat(s)+"&redirect_uri=".concat("https://jakemiki.github.io/twitch-clip-queue/")+'&response_type=token id_token&scope=openid chat:read&claims={"id_token":{"preferred_username":null}}'))},processAuth:function(){if(window.location.hash){var t,e,n=window.location.hash.substring(1).split("&").reduce((function(t,e){var n=e.split("=");return t[n[0]]=decodeURIComponent(decodeURIComponent(n[1])),t}),{});if(window.location.hash="",n.access_token&&n.id_token)n.decodedIdToken=function(t){if(!t)return;var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}(n.id_token),Object(o.d)(n.access_token,n.id_token,null!==(t=null===(e=n.decodedIdToken)||void 0===e?void 0:e.preferred_username)&&void 0!==t?t:"")}},revokeToken:function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("https://id.twitch.tv/oauth2/revoke?client_id=".concat(s,"&token=").concat(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.a=l},20:function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return b}));var r=n(16),c=n(12),a=n(11),i=Object(a.a)("currentClip",{}),u=Object(a.a)("clipQueue",[]),o=Object(a.a)("clipMemory",[]),s=function(t){var e,n,i=f(t);if(i){if(!(i.submitter===t.submitter||null!==(e=null===(n=i.submitters)||void 0===n?void 0:n.includes(t.submitter))&&void 0!==e&&e)){var s,l=Object(c.a)(Object(c.a)({},i),{},{submitters:[].concat(Object(r.a)(null!==(s=null===i||void 0===i?void 0:i.submitters)&&void 0!==s?s:[]),[t.submitter])});u.set((function(t){return t.map((function(t){return Object(a.b)(t,l)?l:t})).sort((function(t,e){var n,r,c,a;return(null!==(n=null===(r=e.submitters)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-(null!==(c=null===(a=t.submitters)||void 0===a?void 0:a.length)&&void 0!==c?c:0)}))}))}}else d(t)||(o.set((function(e){return[].concat(Object(r.a)(null!==e&&void 0!==e?e:[]),[t])})),u.set((function(e){return[].concat(Object(r.a)(null!==e&&void 0!==e?e:[]),[t])})))},l=function(){u.set((function(t){var e=(null!==t&&void 0!==t?t:[]).shift();return i.set(null!==e&&void 0!==e?e:{}),Object(r.a)(t)}))},d=function(t){var e,n=o.get();return null!==(e=null===n||void 0===n?void 0:n.find((function(e){return Object(a.b)(e,t)})))&&void 0!==e?e:void 0},f=function(t){var e,n=u.get();return null!==(e=null===n||void 0===n?void 0:n.find((function(e){return Object(a.b)(e,t)})))&&void 0!==e?e:void 0},h=function(){u.set([]),i.set({})},b=function(){var t;o.set(Object(r.a)(null!==(t=u.get())&&void 0!==t?t:[]))}},25:function(t,e,n){"use strict";var r,c=n(20),a=n(9),i=n(3),u=n.n(i),o=n(38),s=n(6),l=n(12),d=n(22),f=n(21),h=n.n(f).a.create({baseURL:"https://api.twitch.tv/helix/",headers:{"Client-ID":"ryrnsuk3r4howfd6jac8lamdan279v"}}),b={getClip:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("clips?id=".concat(e),{headers:{Authorization:"Bearer ".concat(a.a.get())}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r.data[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getGame:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("games?id=".concat(e),{headers:{Authorization:"Bearer ".concat(a.a.get())}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r.data[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=n(11),v=Object(p.a)("gamesDictionary",{}),j=function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=v.get())[e]){t.next=3;break}return t.abrupt("return",n[e]);case 3:return t.next=5,b.getGame(e);case 5:if(!(r=t.sent)){t.next=9;break}return v.set((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(d.a)({},e,r.name))})),t.abrupt("return",r.name);case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=[{tryGetClip:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r,a,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"clips.twitch.tv"===(n=new URL(e)).hostname){t.next=4;break}return t.abrupt("return");case 4:if(r=n.pathname.split("?")[0].slice(1),!(a=Object(c.g)({provider:"twitch-clip",id:r}))){t.next=8;break}return t.abrupt("return",Object(l.a)({},a));case 8:return t.next=10,b.getClip(r);case 10:if(!(i=t.sent)){t.next=20;break}return t.t0=r,t.t1=i.broadcaster_name,t.next=16,j(i.game_id);case 16:return t.t2=t.sent,t.t3=i.thumbnail_url,t.t4=i.title,t.abrupt("return",{id:t.t0,channel:t.t1,game:t.t2,provider:"twitch-clip",thumbnailUrl:t.t3,title:t.t4});case 20:t.next=24;break;case 22:t.prev=22,t.t5=t.catch(0);case 24:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e){return t.apply(this,arguments)}}()}],O={findByUrl:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(o.a)(m),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=12;break}return c=r.value,t.next=7,c.tryGetClip(e);case 7:if(!(a=t.sent)){t.next=10;break}return t.abrupt("return",a);case 10:t.next=3;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),n.e(t.t0);case 17:return t.prev=17,n.f(),t.finish(17);case 20:return t.abrupt("return",void 0);case 21:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})));return function(e){return t.apply(this,arguments)}}()},x=function(t){r.send(t)},g=function(t){console.log("[TwitchChat] Joining channel",t),x("JOIN #".concat(t))},w={connect:function(){(r=new WebSocket("wss://irc-ws.chat.twitch.tv:443","irc")).onopen=function(){null!==r&&1===r.readyState&&(console.log("[TwitchChat] Connecting and authenticating..."),x("CAP REQ :twitch.tv/tags"),x("PASS oauth:".concat(a.a.get())),x("NICK ".concat(a.g.get())),g(a.f.get()))},r.onclose=function(){console.log("[TwitchChat] Disconnected")},r.onerror=function(t){console.warn("[TwitchChat] Error:",t)},r.onmessage=function(t){var e=t.data;e.startsWith("PING")&&x("PONG :tmi.twitch.tv");var n=function(t){var e="@"===t[0]?t.indexOf(" "):-1,n=t.indexOf(" ",e+1),r=t.indexOf(" ",n+1),c=e>0?t.slice(1,e).split(";").reduce((function(t,e){var n=e.split("=",2);return t[n[0]]=n[1],t}),{}):{},a=t.slice(e+2,t.indexOf("!",e+2)),i=t.slice(n+1,r);if("PRIVMSG"===i){var u=t.indexOf(" ",r+1),o=t.indexOf(":",u+1),s=t.slice(r+2,u),l=t.slice(o+1).trim();return{channel:s,user:c["display-name"]||a,command:i,message:l,tags:c}}return{raw:t,user:c["display-name"]||a,command:i,tags:c}}(e);if("PRIVMSG"===n.command&&n.message){var r=n.message.indexOf("http");if(r>=0){var a=n.message.indexOf(" ",r),i=n.message.slice(r,a>0?a:void 0);console.log("[TwitchChat] Found url:",i),O.findByUrl(i).then((function(t){t&&(t.submitter=n.user,Object(c.a)(t))}))}}}},disconnect:function(){r.close()},joinChannel:g,leaveChannel:function(t){console.log("[TwitchChat] Leaving channel",t),x("PART #".concat(t))}};e.a=w},47:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(37),i=n.n(a),u=(n(47),n(39)),o=n(2),s=n(9),l=n(1),d=c.a.lazy((function(){return n.e(4).then(n.bind(null,75))})),f=c.a.lazy((function(){return n.e(3).then(n.bind(null,77))}));var h=function(){var t=s.c.use();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("header",{className:"flex",children:[Object(l.jsx)("h1",{className:"mb-4 text-2xl md:text-3xl lg:text-5xl font-black leading-tight",children:"Twitch Clip Queue"}),Object(l.jsx)("div",{className:"flex-grow"}),t&&Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:function(){return Object(s.e)()},children:"Logout"})})]}),Object(l.jsx)(r.Suspense,{fallback:Object(l.jsx)("div",{}),children:Object(l.jsx)(u.a,{basename:"/twitch-clip-queue/",children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{exact:!0,path:"/",children:t?Object(l.jsx)(f,{}):Object(l.jsx)(d,{})}),Object(l.jsx)(o.b,{path:"*",children:Object(l.jsx)(o.a,{to:"/"})})]})})}),Object(l.jsxs)("footer",{className:"text-xs mt-4",children:["Created by ",Object(l.jsx)("span",{className:"font-bold",children:"JakeMiki"})]})]})},b=function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,76)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))},p=n(19);i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root")),b(),p.a.processAuth()},9:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"f",(function(){return h})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return p})),n.d(e,"b",(function(){return v}));var r=n(3),c=n.n(r),a=n(6),i=n(14),u=n(19),o=n(25),s=Object(i.a)(!1),l=Object(i.a)(null),d=Object(i.a)(null),f=Object(i.a)(null),h=Object(i.a)(null),b=function(t,e,n){l.set(t),d.set(e),f.set(n),h.set(n),s.set(!0)},p=function(){var t=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.get(),l.set(null),d.set(null),f.set(null),h.set(null),s.set(!1),!e){t.next=9;break}return t.next=9,u.a.revokeToken(e);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(t){o.a.leaveChannel(h.get()),h.set(t),o.a.joinChannel(t)}}},[[73,1,2]]]);
//# sourceMappingURL=main.bf9473d8.chunk.js.map