{"version":3,"sources":["components/Toggle.tsx","pages/Queue/ClipCard.tsx","pages/Queue/ClipRoll.tsx","pages/Queue/Player.tsx","pages/Queue/QueuePage.tsx"],"names":["Toggle","pressed","className","colour","children","onClick","props","classes","addButtonColour","ClipCard","id","provider","thumbnailUrl","title","submitter","submitterCount","channel","game","src","alt","selectCurrentClip","removeClip","ClipRoll","clips","clipLimit","isAcceptingClip","acceptingClips","use","length","slice","map","clip","submitters","PlayerSwitch","undefined","window","location","hostname","height","width","allowFullScreen","startTime","Player","QueuePage","useState","advancedVisible","setAdvancedVisible","isAcceptingClips","clipQueue","clipMem","clipMemory","current","currentClip","token","userName","userChannel","useEffect","TwitchChat","connect","disconnect","Button","nextClip","acceptClips","clearQueue","newChannel","prompt","changeChannel","clearMemory"],"mappings":"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","file":"static/js/4.e9f34748.chunk.js","sourcesContent":["import React, { ButtonHTMLAttributes, ReactNode } from 'react';\nimport { addButtonColour } from './Button';\n\ninterface ToggleProps extends ButtonHTMLAttributes<any> {\n  pressed: boolean;\n  className?: string;\n  colour?: string;\n  children?: ReactNode | undefined;\n\n  onClick: () => void;\n}\n\nfunction Toggle({ pressed, className, colour, children, onClick, ...props }: ToggleProps) {\n  let classes = addButtonColour(colour, className);\n\n  if (pressed) {\n    classes += ' pressed';\n  }\n\n  return (\n    <button {...props} className={classes} onClick={onClick}>\n      {children}\n    </button>\n  );\n}\n\nexport default Toggle;\n","import React from 'react';\r\nimport { removeClip, selectCurrentClip } from '../../store/queue';\r\n\r\nexport interface ClipCardProps {\r\n  id: string;\r\n  provider: string;\r\n  title?: string;\r\n  submitter?: string;\r\n  submitterCount?: number;\r\n  channel?: string;\r\n  game?: string;\r\n\r\n  thumbnailUrl?: string;\r\n}\r\n\r\nfunction ClipCard({ id, provider, thumbnailUrl, title, submitter, submitterCount = 0, channel, game }: ClipCardProps) {\r\n  return (\r\n    <div className=\"clip max-w-sm rounded overflow-hidden flex flex-col mb-4\">\r\n      {thumbnailUrl && <img className=\"w-full\" src={thumbnailUrl} alt={title} />}\r\n      <div className=\"h-full w-full relative\">\r\n        <div className=\"absolute flex right-1 bottom-1 clip-buttons space-x-1\">\r\n          <button className=\"btn-play\" onClick={() => selectCurrentClip({ id, provider })}>\r\n            &raquo;\r\n          </button>\r\n          <button className=\"btn-clear\" onClick={() => removeClip({ id, provider })}>\r\n            &times;\r\n          </button>\r\n        </div>\r\n        <div className=\"px-2 py-1\">\r\n          <h4 className=\"font-bold text-sm mb-1\">{title}</h4>\r\n          <p className=\"text-gray-700 text-xs mb-1 font-normal\">\r\n            <span className=\"font-bold\">{channel} </span>\r\n            {game && (\r\n              <span>\r\n                playing&nbsp;<span className=\"font-bold\">{game}</span>\r\n              </span>\r\n            )}\r\n          </p>\r\n          <p className=\"text-gray-700 text-xs font-normal\">\r\n            {submitter && (\r\n              <>\r\n                Submitted by <span className=\"font-bold\">{submitter}</span>\r\n              </>\r\n            )}\r\n            <span className=\"text-xs\">{submitterCount > 0 && ' +' + submitterCount}</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClipCard;\r\n","import React from 'react';\nimport { acceptingClips } from '../../store/queue';\nimport ClipCard from './ClipCard';\n\nexport interface ClipRollProps {\n  clips: any[];\n  clipLimit?: number;\n}\n\nfunction ClipRoll({ clips, clipLimit = 19 }: ClipRollProps) {\n  const isAcceptingClip = acceptingClips.use();\n\n  return (\n    <div className=\"cliproll flex flex-wrap w-full justify-between\">\n      {clips.length ? (\n        <>\n          {clips.slice(0, clipLimit).map((clip) => (\n            <ClipCard key={`${clip.provider}:${clip.id}`} {...clip} submitterCount={clip.submitters?.length} />\n          ))}\n          {clips.length > clipLimit && (\n            <div className=\"clip max-w-sm rounded overflow-hidden ml-3 mb-3 text-3xl flex\">\n              <div className=\"mx-auto my-auto\">+{clips.length - clipLimit}</div>\n            </div>\n          )}\n        </>\n      ) : (\n        isAcceptingClip && <div className=\"text-lg font-bold\">Waiting for some clips from chat...</div>\n      )}\n    </div>\n  );\n}\n\nexport default ClipRoll;\n","import React from 'react';\r\n\r\nexport interface PlayerProps {\r\n  title?: string;\r\n  provider?: string;\r\n  id?: string;\r\n  channel?: string;\r\n  game?: string;\r\n  submitter?: string;\r\n  submitterCount?: number;\r\n  startTime?: string;\r\n}\r\n\r\nfunction Player(props: PlayerProps) {\r\n  const { game, channel, title, submitter, submitterCount = 0 } = props;\r\n  return (\r\n    <>\r\n      <div className=\"player\">\r\n        <PlayerSwitch {...props} />\r\n      </div>\r\n      <div className=\"pt-2\">\r\n        <h2 className=\"font-bold mb-1\">{title ?? <>&nbsp;</>}</h2>\r\n        <p className=\"text-gray-500 text-sm font-normal\">\r\n          {channel ? (\r\n            <>\r\n              <span className=\"font-bold\">{channel}</span>\r\n              {game && (\r\n                <span>\r\n                  &nbsp;playing&nbsp;<span className=\"font-bold\">{game}</span>\r\n                </span>\r\n              )}\r\n              , submitted by <span className=\"font-bold\">{submitter}</span>\r\n              {submitterCount > 0 && <> and {submitterCount} other(s)</>}\r\n            </>\r\n          ) : (\r\n            <>&nbsp;</>\r\n          )}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction PlayerSwitch({ provider, ...props }: PlayerProps) {\r\n  switch (provider) {\r\n    case undefined:\r\n      return <></>;\r\n    case 'twitch-clip':\r\n      return (\r\n        <iframe\r\n          src={`https://clips.twitch.tv/embed?clip=${props.id}&autoplay=true&parent=${window.location.hostname}`}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          allowFullScreen={true}\r\n          title={props.title}\r\n        ></iframe>\r\n      );\r\n    case 'youtube':\r\n      return (\r\n        <iframe\r\n          src={`https://www.youtube.com/embed/${props.id}?autoplay=1&start=${props.startTime ?? ''}`}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          allowFullScreen={true}\r\n          title={props.title}\r\n        ></iframe>\r\n      );\r\n  }\r\n\r\n  return <span>Provider not supported: {provider}</span>;\r\n}\r\n\r\nexport default Player;\r\n","import React, { useEffect, useState } from 'react';\nimport Button from '../../components/Button';\nimport Toggle from '../../components/Toggle';\nimport TwitchChat from '../../services/TwitchChat';\nimport {\n  acceptClips,\n  acceptingClips,\n  clearMemory,\n  clearQueue,\n  clipMemory,\n  clipQueue,\n  currentClip,\n  nextClip,\n} from '../../store/queue';\nimport { changeChannel, userChannel, userName } from '../../store/user';\nimport ClipRoll from './ClipRoll';\nimport Player from './Player';\nimport './styles.css';\n\nfunction QueuePage() {\n  const [advancedVisible, setAdvancedVisible] = useState(false);\n  const isAcceptingClips = acceptingClips.use();\n  const clips = clipQueue.use();\n  const clipMem = clipMemory.use();\n  const current = currentClip.use();\n\n  const token = userName.use();\n  const channel = userChannel.use();\n\n  useEffect(() => {\n    TwitchChat.connect();\n    return () => TwitchChat.disconnect();\n  }, [token]);\n\n  return (\n    <>\n      <Player {...current} submitterCount={current.submitters?.length} />\n      <div className=\"mt-4 flex w-full\">\n        <Button colour=\"green\" className=\"mr-2\" onClick={() => nextClip()}>\n          Next &raquo;\n        </Button>\n        <Toggle pressed={isAcceptingClips} className=\"mr-2\" onClick={() => acceptClips(!isAcceptingClips)}>\n          {isAcceptingClips ? <>Close the floodgates! 🌊</> : <>Open the floodgates! 🚪</>}\n        </Toggle>\n\n        <div className=\"flex-grow\" />\n        <Button colour=\"red\" className=\"mr-2\" onClick={() => clearQueue()}>\n          &times; Clear queue ({clips.length})\n        </Button>\n        <Toggle pressed={advancedVisible} colour=\"red\" onClick={() => setAdvancedVisible(!advancedVisible)}>\n          ⚙️\n        </Toggle>\n      </div>\n      {advancedVisible && (\n        <div className=\"mt-2 flex w-full\">\n          <div className=\"flex-grow\" />\n          <Button\n            className=\"mr-2\"\n            onClick={() => {\n              const newChannel = prompt('Enter channel to read chat from', channel as string);\n              if (newChannel && newChannel !== channel) {\n                changeChannel(newChannel);\n              }\n            }}\n          >\n            Change channel ({channel})\n          </Button>\n          <Button\n            onClick={() => clearMemory()}\n            title=\"Remove all clips from permanent memory, allow all clips to be posted and queued again\"\n          >\n            &times; Purge memory ({clipMem.length})\n          </Button>\n        </div>\n      )}\n      <div className=\"mt-4\">\n        <ClipRoll clips={clips} />\n      </div>\n    </>\n  );\n}\n\nexport default QueuePage;\n"],"sourceRoot":""}