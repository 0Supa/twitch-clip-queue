(this["webpackJsonptwitch-clip-queue"]=this["webpackJsonptwitch-clip-queue"]||[]).push([[4],{105:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var l=c(15),r=c(106),n=(c(0),c(2)),s=["className","colour","children","onClick"],i=function(e,t){switch(t=(t||"")+" ",e){case"red":return t+"bg-red-500 border-red-700 hover:bg-red-400 hover:border-red-500";case"green":return t+"bg-green-500 border-green-700 hover:bg-green-400 hover:border-green-500";case"yellow":return t+"bg-yellow-500 border-yellow-700 hover:bg-yellow-400 hover:border-yellow-500"}return t+"bg-purple-500 border-purple-700 hover:bg-purple-400 hover:border-purple-500"};t.b=function(e){var t=e.className,c=e.colour,a=e.children,o=e.onClick,d=Object(r.a)(e,s),b=i(c,t);return Object(n.jsx)("button",Object(l.a)(Object(l.a)({},d),{},{className:b,onClick:o,children:a}))}},107:function(e,t,c){"use strict";c(0);var l=c(1),r=c.n(l),n=c(3),s=c(7),i=c(105),a=c(23),o=c(11),d=c(2);var b=function(){var e=Object(s.c)(o.c);return Object(d.jsxs)("header",{className:"flex mb-4 pl-16 pr-32 pt-2 pb-2 bg-gray-800",children:[Object(d.jsx)("h1",{children:"Twitch Clip Queue"}),Object(d.jsx)("div",{className:"flex-grow"}),Object(d.jsx)("div",{children:e.get()?Object(d.jsx)(i.b,{onClick:Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.e)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Logout"}):Object(d.jsx)(i.b,{onClick:function(){return a.a.redirectToLogin()},children:"Login with Twitch"})})]})};t.a=function(e){var t=e.children,c=e.fullWidth,l=void 0!==c&&c?"w-full px-16":"lg:container lg:mx-auto";return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b,{}),Object(d.jsx)("div",{className:l,children:t})]})}},109:function(e,t,c){},114:function(e,t,c){"use strict";c.r(t);var l=c(110),r=c(0),n=c(7),s=c(105),i=c(15),a=c(106),o=c(2),d=["pressed","className","colour","children","onClick"];var b=function(e){var t=e.pressed,c=e.className,l=e.colour,r=e.children,n=e.onClick,b=Object(a.a)(e,d),j=Object(s.a)(l,c);return t&&(j+=" pressed"),Object(o.jsx)("button",Object(i.a)(Object(i.a)({},b),{},{className:j,onClick:n,children:r}))},j=c(31),u=c(32),h=c(5),m=c(11);var p=function(e){var t,c,l=e.clip,r=l.thumbnailUrl,n=l.id,i=l.provider,a=l.url,d=l.title,b=l.game,j=l.submitter,u=l.submitters,m=l.channel,p=null!==(t=null===u||void 0===u?void 0:u.length)&&void 0!==t?t:0;return Object(o.jsxs)("div",{className:"clip max-w-sm rounded overflow-hidden flex flex-col ",children:[r&&Object(o.jsx)("img",{className:"w-full cursor-pointer",src:r,alt:d,onClick:function(){return Object(h.m)({id:n,provider:i})}}),Object(o.jsxs)("div",{className:"h-full w-full relative",children:[Object(o.jsxs)("div",{className:"px-2 py-1 ",children:[Object(o.jsx)("h4",{className:"font-bold text-sm mb-1 w-full overflow-hidden whitespace-nowrap overflow-ellipsis",children:Object(o.jsx)("a",{className:"text-black no-underline",href:a,target:"_blank",rel:"noreferrer",children:d})}),Object(o.jsxs)("p",{className:"text-gray-900 text-xs mb-1 font-normal",children:[Object(o.jsxs)("span",{className:"font-bold",children:[m," "]}),b&&Object(o.jsxs)("span",{children:["playing\xa0",Object(o.jsx)("span",{className:"font-bold",children:b})]})]}),Object(o.jsxs)("p",{className:"text-gray-900 text-xs font-normal",children:[j&&Object(o.jsxs)(o.Fragment,{children:["Submitted by ",Object(o.jsx)("span",{className:"font-bold",children:null!==(c=j.displayName)&&void 0!==c?c:j.userName})]}),Object(o.jsx)("span",{className:"text-xs",children:p>0&&" +"+p})]})]}),Object(o.jsxs)("div",{className:"absolute flex right-1 bottom-1 clip-buttons space-x-1",children:[Object(o.jsx)(s.b,{colour:"green",onClick:function(){return Object(h.m)({id:n,provider:i})},children:"\xbb"}),Object(o.jsx)(s.b,{colour:"red",onClick:function(){return Object(h.l)({id:n,provider:i})},children:"\xd7"})]})]})]})};var O=function(e){var t=e.clips,c=Object(n.c)(h.b).get();return Object(o.jsxs)("div",{className:"w-full overflow-y-scroll h-full",children:[!t.length&&Object(o.jsxs)("strong",{children:["No clips in queue. ",c&&Object(o.jsx)(o.Fragment,{children:"Send some in chat!"})]}),t.slice(0,100).map((function(e){return Object(o.jsx)("div",{className:"mb-4",children:Object(o.jsx)(p,{clip:e})},"".concat(e.provider,"_").concat(e.id))})),Object(o.jsx)("div",{className:"mb-16"})]})},x=c(113),f=c(116);function v(e){var t,c=e.clip;switch(c.provider){case void 0:return Object(o.jsx)(o.Fragment,{});case"twitch-clip":return Object(o.jsx)("iframe",{src:"https://clips.twitch.tv/embed?clip=".concat(c.id,"&autoplay=true&parent=").concat(window.location.hostname),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:c.title});case"twitch-vod":return Object(o.jsx)("iframe",{src:"https://player.twitch.tv/?video=".concat(c.id,"&autoplay=true&parent=").concat(window.location.hostname,"&time=").concat(c.startTime),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:c.title});case"youtube":return Object(o.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(c.id,"?autoplay=1&start=").concat(null!==(t=c.startTime)&&void 0!==t?t:""),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:c.title})}return Object(o.jsxs)("span",{children:["Provider not supported: ",c.provider]})}var g=function(e){var t,c,l=e.clip,r=l.channel,n=l.title,s=l.timestamp,a=l.startTime,d=l.game,b=l.submitter,j=l.submitters,u=null!==(t=null===j||void 0===j?void 0:j.length)&&void 0!==t?t:0;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"player player-container",children:Object(o.jsx)(v,Object(i.a)({},e))}),Object(o.jsxs)("div",{className:"player-title-container",children:[Object(o.jsxs)("h2",{className:"font-bold mb-1",children:[null!==n&&void 0!==n?n:Object(o.jsx)(o.Fragment,{children:"\xa0"}),a&&Object(o.jsxs)("small",{className:"text-gray-700",children:[" (","start at"," ",Object(o.jsx)("span",{className:"cursor-pointer underline",onClick:function(){return Object(h.k)()},children:a}),")"]})]}),Object(o.jsx)("p",{className:"text-gray-500 text-sm font-normal",children:r?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"font-bold",children:r}),d&&Object(o.jsxs)("span",{children:["\xa0playing\xa0",Object(o.jsx)("span",{className:"font-bold",children:d})]}),", submitted by ",Object(o.jsx)("span",{className:"font-bold",children:null!==(c=null===b||void 0===b?void 0:b.displayName)&&void 0!==c?c:null===b||void 0===b?void 0:b.userName}),u>0&&Object(o.jsxs)("span",{children:[" and ",u," other(s)"]}),s&&Object(o.jsxs)("span",{children:[", created ",Object(x.a)(Object(f.a)(s))," ago"]})]}):Object(o.jsx)(o.Fragment,{children:"\xa0"})})]})]})},N=(c(109),c(107)),w=c(30);t.default=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),c=t[0],i=t[1],a=Object(n.c)(h.b).get(),d=Object(n.c)(h.g).get(),p=Object(n.c)(h.f).get(),x=Object(n.c)(h.h).get(),f=Object(n.c)(m.a).get(),v=Object(n.c)(m.g).get(),y=Object(n.c)(m.f).get(),k=Object(n.c)(h.p).get(),C=Object(n.c)(h.o).get()>=k,S="Clip submissions are open. Send some clips in chat!";return a?k>0&&C&&(S="Clip limit reached. Keep sending queued clips to get them to the top \ud83d\udc46"):S="Clip submissions are closed.",Object(r.useEffect)((function(){return u.a.connect(),function(){u.a.disconnect()}}),[f]),Object(o.jsx)(N.a,{fullWidth:!0,children:Object(o.jsxs)("div",{className:"w-full queue-page",children:[Object(o.jsx)(g,{clip:x},x.hash),Object(o.jsxs)("div",{className:"buttons-container relative",children:[Object(o.jsxs)("div",{className:"flex w-full",children:[Object(o.jsx)(s.b,{colour:"green",className:"mr-2",onClick:function(){return Object(h.j)()},children:"Next \xbb"}),Object(o.jsx)(s.b,{colour:"red",className:"mr-2",onClick:function(){return Object(h.j)(!0)},title:"Skipping a clip opens up a slot for another clip to be posted if gates are still open",children:"\xd7 Skip"}),Object(o.jsx)(b,{pressed:a,className:"mr-2",onClick:function(){return Object(h.a)(!a)},children:a?Object(o.jsx)(o.Fragment,{children:"Close the floodgates! \ud83c\udf0a"}):Object(o.jsx)(o.Fragment,{children:"Open the floodgates! \ud83d\udeaa"})}),Object(o.jsx)(b,{pressed:c,onClick:function(){return i(!c)},children:"\u2699\ufe0f"}),Object(o.jsx)("div",{className:"ml-4 font-bold text-xl leading-loose",children:S})]}),c&&Object(o.jsxs)("div",{className:"absolute flex -top-20 pb-1 pt-7 bg-gray-900 bg-opacity-70",children:[Object(o.jsxs)(s.b,{className:"mr-2",title:"Change channel to read clips from",onClick:function(){var e=prompt("Enter channel to read chat from",y);e&&e!==y&&Object(m.b)(e)},children:["Change channel ",Object(o.jsxs)("em",{children:["(",y,")"]})]}),Object(o.jsxs)(s.b,{className:"mr-2",title:"Soft clip limit - after set value no new clips are accepted, current clips can still be voted on",onClick:function(){var e=prompt("Set a soft limit after which no new clips will be accepted (0 to disable)",k.toString());null!==e&&Number.isInteger(+e)&&Object(h.n)(+e)},children:["Soft limit ",Object(o.jsxs)("em",{children:["(",k,")"]})]}),Object(o.jsx)(s.b,{className:"mr-2",title:"Add clip from url",onClick:function(){var e=prompt("Enter clip url",""),t=Object(w.a)(null!==e&&void 0!==e?e:"");t&&j.a.findByUrl(t).then((function(e){e&&(e.hash=Date.now().toString(),e.url=t,e.submitter={userName:null!==v&&void 0!==v?v:"",displayName:null!==v&&void 0!==v?v:""},Object(h.c)(e))}))},children:"+"}),Object(o.jsx)(s.b,{className:"mr-2",title:"Reload current clip",onClick:function(){return Object(h.k)()},children:"\u267b\ufe0f"}),Object(o.jsxs)(s.b,{className:"mr-2",onClick:function(){return Object(h.e)()},title:"Clear current queue",children:["\xd7 Clear queue ",Object(o.jsxs)("em",{children:["(",d.length,")"]})]}),Object(o.jsxs)(s.b,{onClick:function(){return Object(h.d)()},title:"Remove all clips from permanent memory, allow all clips to be queued again",children:["\xd7 Purge memory ",Object(o.jsxs)("em",{children:["(",p.length,")"]})]})]})]}),Object(o.jsxs)("div",{className:"nextup-container",children:[Object(o.jsxs)("div",{className:"w-full flex border-b-2 mb-2 align-text-bottom",children:[Object(o.jsx)("h2",{children:"Next up"}),Object(o.jsx)("div",{className:"flex-grow"}),Object(o.jsx)("h2",{children:d.length})]}),Object(o.jsx)(O,{clips:d})]})]})})}}}]);
//# sourceMappingURL=4.ad8bf937.chunk.js.map