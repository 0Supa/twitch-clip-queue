(this["webpackJsonptwitch-clip-queue"]=this["webpackJsonptwitch-clip-queue"]||[]).push([[4],{102:function(e,t,c){},104:function(e,t,c){"use strict";c.r(t);var n=c(11);var l=c(23);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var c=[],n=!0,l=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(c.push(s.value),!t||c.length!==t);n=!0);}catch(i){l=!0,r=i}finally{try{n||null==a.return||a.return()}finally{if(l)throw r}}return c}}(e,t)||Object(l.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=c(0),a=c(6),i=c(26),o=c(34),d=c(2),j=["pressed","className","colour","children","onClick"];var b=function(e){var t=e.pressed,c=e.className,l=e.colour,r=e.children,s=e.onClick,a=Object(o.a)(e,j),b=Object(i.a)(l,c);return t&&(b+=" pressed"),Object(d.jsx)("button",Object(n.a)(Object(n.a)({},a),{},{className:b,onClick:s,children:r}))},u=c(31),m=c(30),h=c(13),O=c(8);var x=function(e){var t,c=e.id,n=e.provider,l=e.url,r=e.thumbnailUrl,s=e.title,a=e.submitter,o=e.submitterCount,j=void 0===o?0:o,b=e.channel,u=e.game;return Object(d.jsxs)("div",{className:"clip max-w-sm rounded overflow-hidden flex flex-col",children:[r&&Object(d.jsx)("img",{className:"w-full",src:r,alt:s}),Object(d.jsxs)("div",{className:"h-full w-full relative",children:[Object(d.jsxs)("div",{className:"absolute flex right-1 bottom-1 clip-buttons space-x-1",children:[Object(d.jsx)(i.b,{colour:"green",onClick:function(){return Object(h.l)({id:c,provider:n})},children:"\xbb"}),Object(d.jsx)(i.b,{colour:"red",onClick:function(){return Object(h.k)({id:c,provider:n})},children:"\xd7"})]}),Object(d.jsxs)("div",{className:"px-2 py-1",children:[Object(d.jsx)("h4",{className:"font-bold text-sm mb-1",children:Object(d.jsx)("a",{className:"text-black no-underline",href:l,target:"_blank",rel:"noreferrer",children:s})}),Object(d.jsxs)("p",{className:"text-gray-700 text-xs mb-1 font-normal",children:[Object(d.jsxs)("span",{className:"font-bold",children:[b," "]}),u&&Object(d.jsxs)("span",{children:["playing\xa0",Object(d.jsx)("span",{className:"font-bold",children:u})]})]}),Object(d.jsxs)("p",{className:"text-gray-700 text-xs font-normal",children:[a&&Object(d.jsxs)(d.Fragment,{children:["Submitted by ",Object(d.jsx)("span",{className:"font-bold",children:null!==(t=a.displayName)&&void 0!==t?t:a.userName})]}),Object(d.jsx)("span",{className:"text-xs",children:j>0&&" +"+j})]})]})]})]})};var p=function(e){var t=e.clips,c=e.clipLimit,l=void 0===c?19:c,r=Object(a.c)(h.b);return Object(d.jsx)("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 w-full",children:t.length?Object(d.jsxs)(d.Fragment,{children:[t.slice(0,l).map((function(e){var t;return Object(d.jsx)(x,Object(n.a)(Object(n.a)({},e),{},{submitterCount:null===(t=e.submitters)||void 0===t?void 0:t.length}),"".concat(e.provider,":").concat(e.id))})),t.length>l&&Object(d.jsx)("div",{className:"clip max-w-sm rounded overflow-hidden text-3xl flex py-4",children:Object(d.jsxs)("div",{className:"mx-auto my-auto",children:["+",t.length-l," more"]})})]}):r.get()&&Object(d.jsx)("div",{className:"col-span-full text-lg font-bold",children:"Waiting for some clips from chat..."})})},f=["provider"];function v(e){var t,c=e.provider,n=Object(o.a)(e,f);switch(c){case void 0:return Object(d.jsx)(d.Fragment,{});case"twitch-clip":return Object(d.jsx)("iframe",{src:"https://clips.twitch.tv/embed?clip=".concat(n.id,"&autoplay=true&parent=").concat(window.location.hostname),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:n.title});case"twitch-vod":return Object(d.jsx)("iframe",{src:"https://player.twitch.tv/?video=".concat(n.id,"&autoplay=true&parent=").concat(window.location.hostname,"&time=").concat(n.startTime),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:n.title});case"youtube":return Object(d.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(n.id,"?autoplay=1&start=").concat(null!==(t=n.startTime)&&void 0!==t?t:""),height:"100%",width:"100%",className:"player",allowFullScreen:!0,title:n.title})}return Object(d.jsxs)("span",{children:["Provider not supported: ",c]})}var g=function(e){var t,c=e.game,l=e.channel,r=e.title,s=e.submitter,a=e.submitterCount,i=void 0===a?0:a;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"player",children:Object(d.jsx)(v,Object(n.a)({},e))}),Object(d.jsxs)("div",{className:"pt-2",children:[Object(d.jsx)("h2",{className:"font-bold mb-1",children:null!==r&&void 0!==r?r:Object(d.jsx)(d.Fragment,{children:"\xa0"})}),Object(d.jsx)("p",{className:"text-gray-500 text-sm font-normal",children:l?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{className:"font-bold",children:l}),c&&Object(d.jsxs)("span",{children:["\xa0playing\xa0",Object(d.jsx)("span",{className:"font-bold",children:c})]}),", submitted by ",Object(d.jsx)("span",{className:"font-bold",children:null!==(t=null===s||void 0===s?void 0:s.displayName)&&void 0!==t?t:null===s||void 0===s?void 0:s.userName}),i>0&&Object(d.jsxs)(d.Fragment,{children:[" and ",i," other(s)"]})]}):Object(d.jsx)(d.Fragment,{children:"\xa0"})})]})]})};c(102);t.default=function(){var e,t=r(Object(s.useState)(!1),2),c=t[0],l=t[1],o=Object(a.c)(h.b),j=Object(a.c)(h.g),x=Object(a.c)(h.f),f=Object(a.c)(h.h),v=Object(a.c)(O.g),N=Object(a.c)(O.f),y=v.get();return Object(s.useEffect)((function(){return m.a.connect(),function(){m.a.disconnect()}}),[y]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g,Object(n.a)(Object(n.a)({},f.get()),{},{submitterCount:null===(e=f.submitters.get())||void 0===e?void 0:e.length})),Object(d.jsxs)("div",{className:"mt-4 flex w-full",children:[Object(d.jsx)(i.b,{colour:"green",className:"mr-2",onClick:function(){return Object(h.j)()},children:"Next \xbb"}),Object(d.jsx)(b,{pressed:o.get(),className:"mr-2",onClick:function(){return Object(h.a)(!o.get())},children:o.get()?Object(d.jsx)(d.Fragment,{children:"Close the floodgates! \ud83c\udf0a"}):Object(d.jsx)(d.Fragment,{children:"Open the floodgates! \ud83d\udeaa"})}),Object(d.jsxs)(i.b,{colour:"red",className:"mr-2",onClick:function(){return Object(h.e)()},children:["\xd7 Clear queue ",Object(d.jsxs)("em",{children:["(",j.length,")"]})]}),Object(d.jsx)(b,{pressed:c,colour:"red",onClick:function(){return l(!c)},children:"\u2699\ufe0f"})]}),c&&Object(d.jsxs)("div",{className:"mt-2 flex w-full",children:[Object(d.jsxs)(i.b,{className:"mr-2",onClick:function(){var e=prompt("Enter channel to read chat from",N.get());e&&e!==N.get()&&Object(O.b)(e)},children:["Change channel ",Object(d.jsxs)("em",{children:["(",N.get(),")"]})]}),Object(d.jsx)(i.b,{className:"mr-2",onClick:function(){var e=prompt("Enter clip url","");e&&u.a.findByUrl(e).then((function(t){var c,n;t&&(t.url=e,t.submitter={userName:null!==(c=O.g.get())&&void 0!==c?c:"",displayName:null!==(n=O.g.get())&&void 0!==n?n:""},Object(h.c)(t))}))},children:"+ Add cilp"}),Object(d.jsxs)(i.b,{onClick:function(){return Object(h.d)()},title:"Remove all clips from permanent memory, allow all clips to be posted and queued again",children:["\xd7 Purge memory ",Object(d.jsxs)("em",{children:["(",x.length,")"]})]})]}),Object(d.jsx)("div",{className:"mt-4",children:Object(d.jsx)(p,{clips:j.get()})})]})}}}]);
//# sourceMappingURL=4.ce5889a3.chunk.js.map